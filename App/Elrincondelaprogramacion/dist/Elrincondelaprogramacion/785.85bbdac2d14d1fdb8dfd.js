(self.webpackChunkelrincondelaprogramacion=self.webpackChunkelrincondelaprogramacion||[]).push([[785],{6705:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PostModule:()=>H});var o=n(8583),a=n(1841),i=n(4372),r=n(7203),s=n(6901),l=n(665),m=n(5319),c=n(639),d=n(7639),u=n(4454),p=n(9075),g=n(2340),h=n(9991);function f(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",15),c["\u0275\u0275element"](1,"img",16),c["\u0275\u0275text"](2," Editar\n"),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275attribute"]("data-target","#update"+e.comment.id)}}function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",17),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("content"),"contenido")," ")}}let v=(()=>{class e{constructor(e,t){this._commentService=e,this._flashMessagesService=t,this.form=new l.cw({content:new l.NI("",l.kI.required)}),this.updateCommentSubscription=new m.w}ngOnInit(){this.setFormValue()}ngOnDestroy(){this.updateCommentSubscription.unsubscribe()}setFormValue(){var e;null===(e=this.form.get("content"))||void 0===e||e.setValue(this.comment.content)}update(){this.setCommentFormValues(),this.updateCommentSubscription=this._commentService.update(this.comment).subscribe(e=>{e&&(this._commentService.setUpdatedCommentList$(!0),window.scrollTo(0,400),this.showFlashMessage("Has modificado el comentario","alert alert-success col-md-7 text-center mx-auto",3e3))},e=>{window.scrollTo(0,400),this.showFlashMessage("No has modificado el comentario","alert alert-danger col-md-7 text-center mx-auto",3e3)})}setCommentFormValues(){var e,t;(null===(e=this.form.get("content"))||void 0===e?void 0:e.value)&&(this.comment.content=null===(t=this.form.get("content"))||void 0===t?void 0:t.value)}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let o="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(o=`El campo ${t} es obligatorio`),o}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](h.O),c["\u0275\u0275directiveInject"](i.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["edit-comment"]],inputs:{comment:"comment",user:"user"},decls:22,vars:5,consts:[["type","button","class","btn btn-success button editButton ml-5","data-toggle","modal",4,"ngIf"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"text-center",3,"formGroup"],["for","content"],["formControlName","content","name","content",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-success",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],["type","button","data-toggle","modal",1,"btn","btn-success","button","editButton","ml-5"],["src","assets/images/edit-icon.png","alt","Imagen de modificar comentario",1,"w-25"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275template"](0,f,3,1,"button",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"div",2),c["\u0275\u0275elementStart"](3,"div",3),c["\u0275\u0275elementStart"](4,"div",4),c["\u0275\u0275elementStart"](5,"h4",5),c["\u0275\u0275text"](6,"\xbfQuieres modificar el comentario?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"button",6),c["\u0275\u0275text"](8," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"div",7),c["\u0275\u0275elementStart"](10,"form",8),c["\u0275\u0275elementStart"](11,"label",9),c["\u0275\u0275text"](12,"Modifica tu comentario"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](13,"br"),c["\u0275\u0275elementStart"](14,"textarea",10),c["\u0275\u0275text"](15,"                    "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,b,2,1,"span",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",12),c["\u0275\u0275elementStart"](18,"button",13),c["\u0275\u0275listener"]("click",function(){return t.update()}),c["\u0275\u0275text"](19," Modificar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"button",14),c["\u0275\u0275text"](21," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275property"]("ngIf",(null==t.user?null:t.user.id)==t.comment.user.id&&!t.comment.inadequate),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate"]("id","update"+t.comment.id),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("content"))),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[o.NgIf,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[".button[_ngcontent-%COMP%]{width:16%}.editButton[_ngcontent-%COMP%]{margin-top:-1%}"]}),e})();function S(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",32),2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("src",t.profileImageUrl+e.user.profileImage,c["\u0275\u0275sanitizeUrl"])}}function I(e,t){1&e&&c["\u0275\u0275element"](0,"img",33)}function x(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",34),c["\u0275\u0275element"](1,"img",35),c["\u0275\u0275text"](2," Borrar "),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275attribute"]("data-target","#delete"+e.id)}}function C(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"input",36),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"]().$implicit;return c["\u0275\u0275nextContext"](2).markAsInadequate(t.id)}),c["\u0275\u0275elementEnd"]()}}const w=function(e){return["/user-details",e]};function E(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"div",10),c["\u0275\u0275elementStart"](1,"div",11),c["\u0275\u0275elementStart"](2,"div",12),c["\u0275\u0275template"](3,S,1,1,"img",13),c["\u0275\u0275template"](4,I,1,0,"img",14),c["\u0275\u0275elementStart"](5,"a",15),c["\u0275\u0275elementStart"](6,"h6"),c["\u0275\u0275text"](7),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"span",16),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"amCalendar"),c["\u0275\u0275pipe"](11,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](12,"edit-comment",17),c["\u0275\u0275template"](13,x,3,1,"button",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",19),c["\u0275\u0275elementStart"](15,"div",20),c["\u0275\u0275elementStart"](16,"div",21),c["\u0275\u0275elementStart"](17,"div",22),c["\u0275\u0275elementStart"](18,"h4",23),c["\u0275\u0275text"](19,"\xbfQuieres borrar el comentario?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](20,"button",24),c["\u0275\u0275text"](21," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"div",25),c["\u0275\u0275text"](23," Vas a borrar definitivamente el comentario "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](24,"div",26),c["\u0275\u0275elementStart"](25,"button",27),c["\u0275\u0275listener"]("click",function(){const t=c["\u0275\u0275restoreView"](e).$implicit;return c["\u0275\u0275nextContext"](2).delete(t.id)}),c["\u0275\u0275text"](26," Borrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"button",28),c["\u0275\u0275text"](28," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](29,"br"),c["\u0275\u0275elementStart"](30,"p",29,30),c["\u0275\u0275text"](32),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](33,C,1,0,"input",31),c["\u0275\u0275element"](34,"hr"),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.user.profileImage),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.user.profileImage),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](16,w,e.user.id)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.user.nick),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate1"](" Publicado ",c["\u0275\u0275pipeBind1"](10,11,c["\u0275\u0275pipeBind2"](11,13,e.createdAt,"es"))," "),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("comment",e)("user",n.user),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",(null==n.user?null:n.user.id)==e.user.id&&!e.inadequate),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate"]("id","delete"+e.id),c["\u0275\u0275advance"](18),c["\u0275\u0275textInterpolate1"](" ",e.inadequate?"El comentario est\xe1 marcado como inadecuado":e.content," "),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==(null==n.user?null:n.user.roles[0])&&!e.inadequate)}}const y=function(e,t){return["/posts",e,"page",t]};function k(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"li",5),c["\u0275\u0275elementStart"](1,"a",37),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction2"](2,y,n.post.title,e)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e," ")}}function _(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275element"](1,"flash-messages"),c["\u0275\u0275template"](2,E,35,18,"div",2),c["\u0275\u0275element"](3,"br"),c["\u0275\u0275elementStart"](4,"nav",3),c["\u0275\u0275elementStart"](5,"ul",4),c["\u0275\u0275elementStart"](6,"li",5),c["\u0275\u0275elementStart"](7,"a",6),c["\u0275\u0275elementStart"](8,"span",7),c["\u0275\u0275text"](9,"\xab"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,k,3,5,"li",8),c["\u0275\u0275elementStart"](11,"li",5),c["\u0275\u0275elementStart"](12,"a",9),c["\u0275\u0275elementStart"](13,"span",7),c["\u0275\u0275text"](14,"\xbb"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",e.comments),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction2"](4,y,e.post.title,e.prevPage)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngForOf",e.totalPages),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction2"](7,y,e.post.title,e.nextPage))}}let P=(()=>{class e{constructor(e,t,n,o,a){this._userService=e,this._postService=t,this._commentService=n,this._route=o,this._flashMessagesService=a,this.comments=[],this.user=this._userService.getUserLoggedIn(),this.profileImageUrl=`${g.N.url}/profile-images/`,this.updateCommentListSubscription=new m.w,this.getPostCommentsSubscription=new m.w,this.inadequateSubscription=new m.w,this.deleteCommentSubscription=new m.w,this.prevPage=0,this.nextPage=0,this.totalPages=[]}ngOnInit(){this.getRouteParams()}ngOnDestroy(){this.updateCommentListSubscription.unsubscribe(),this.getPostCommentsSubscription.unsubscribe(),this.inadequateSubscription.unsubscribe(),this.deleteCommentSubscription.unsubscribe()}getRouteParams(){this._route.params.subscribe(e=>{this.page=e.page,this.page&&this.page.match(/[\d]+/)?this.page=Number.parseInt(this.page):(this.page=1,this.prevPage=1,this.nextPage=2),this.getPostComments(),this.updateCommentList()})}getPostComments(){this.getPostCommentsSubscription=this._postService.getPostComments(this.page,this.post.id).subscribe(e=>{e.Comments&&(this.comments=e.Comments,this.pagination(e.totalPages))},e=>{})}markAsInadequate(e){this.inadequateSubscription=this._commentService.inadequate(e).subscribe(e=>{e&&(this.getRouteParams(),window.scrollTo(0,400),this.showFlashMessage("Has marcado como inadecuado el comentario","alert alert-success col-md-7 text-center mx-auto",3e3))},e=>{window.scrollTo(0,400),this.showFlashMessage("No has marcado como inadecuado el comentario","alert alert-danger col-md-7 text-center mx-auto",3e3)})}updateCommentList(){this.updateCommentListSubscription=this._commentService.getUpdatedCommentList$().subscribe(e=>{e&&this.getPostComments()})}pagination(e){this.totalPages=[];for(let t=1;t<=e;t++)this.totalPages.push(t);this.prevPage=this.page>=2?this.page-1:1,this.nextPage=this.page<e?this.page+1:e}delete(e){this.deleteCommentSubscription=this._commentService.delete(e).subscribe(e=>{e&&(this.getPostComments(),window.scrollTo(0,400),this.showFlashMessage("Has borrado el comentario","alert alert-success col-md-7 text-center mx-auto",3e3))},e=>{window.scrollTo(0,400),this.showFlashMessage("No has borrado el comentario","alert alert-danger col-md-7 text-center mx-auto",3e3)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.K),c["\u0275\u0275directiveInject"](d.L),c["\u0275\u0275directiveInject"](h.O),c["\u0275\u0275directiveInject"](s.gz),c["\u0275\u0275directiveInject"](i.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["comment-list"]],inputs:{post:"post"},decls:3,vars:1,consts:[[1,"text-center"],[4,"ngIf"],["class","comment mt-4 text-justify",4,"ngFor","ngForOf"],["aria-label","Page navigation example"],[1,"pagination","justify-content-center"],[1,"page-item"],["routerLinkActive","btn-info","aria-label","Previous",1,"page-link",3,"routerLink"],["aria-hidden","true"],["class","page-item",4,"ngFor","ngForOf"],["routerLinkActive","btn-info","aria-label","Next",1,"page-link",3,"routerLink"],[1,"comment","mt-4","text-justify"],[1,"row"],[1,"col-md-12","col-lg-12","col-xs-12","col-sm-12"],["alt","Imagen de perfil","class","profileImage mr-1",3,"src",4,"ngIf"],["src","assets/images/no-profile-image.png","alt","Imagen de perfil","class","profileImage mr-1",4,"ngIf"],[1,"badge","badge-primary","rounded-pill","mr-2",3,"routerLink"],[1,"badge","rounded-pill","badge-secondary","mr-2"],[3,"comment","user"],["type","button","class","btn btn-danger button float-right","data-toggle","modal",4,"ngIf"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],["id","commentContent"],["commentContent",""],["type","button","value","Comentario inadecuado","class","btn btn-info",3,"click",4,"ngIf"],["alt","Imagen de perfil",1,"profileImage","mr-1",3,"src"],["src","assets/images/no-profile-image.png","alt","Imagen de perfil",1,"profileImage","mr-1"],["type","button","data-toggle","modal",1,"btn","btn-danger","button","float-right"],["src","assets/images/delete-icon.png","alt","Imagen de borrar comentario",1,"w-25"],["type","button","value","Comentario inadecuado",1,"btn","btn-info",3,"click"],["routerLinkActive","btn-info",1,"page-link",3,"routerLink"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Comentarios"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](2,_,15,10,"div",1)),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",t.comments.length))},directives:[o.NgIf,i.cS,o.NgForOf,s.yS,s.Od,v],pipes:[r.tp,r.Ue],styles:[".profileImage[_ngcontent-%COMP%]{vertical-align:middle;width:50px;height:50px;border-radius:50%}.button[_ngcontent-%COMP%]{width:16%}"]}),e})();class M{constructor(e,t,n,o,a){this.id=e,this.content=t,this.userId=n,this.postId=o,this.inadequate=a,this.createdAt=Date.now()}setContent(e){this.content=e}setUserId(e){this.userId=e}setPostId(e){this.postId=e}setInadequate(e){this.inadequate=e}setUpdatedAt(e){this.updatedAt=e}getId(){return this.id}getContent(){return this.content}getUserId(){return this.userId}getPostId(){return this.postId}getInadequate(){return this.inadequate}getCreatedAt(){return this.createdAt}getUpdatedAt(){return this.updatedAt}}function L(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",5),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("content"),"contenido")," ")}}let F=(()=>{class e{constructor(e,t,n){this._userService=e,this._commentService=t,this._flashMessagesService=n,this.user=this._userService.getUserLoggedIn(),this.form=new l.cw({content:new l.NI("",l.kI.required)}),this.createCommentSubscription=new m.w}ngOnInit(){this.comment=new M(null,"",this.user.id,this.post.id,!1)}ngOnDestroy(){this.createCommentSubscription.unsubscribe()}createComment(){this.setCommentFormValues(),this.createCommentSubscription=this._commentService.create(this.post.id,this.comment).subscribe(e=>{e&&(window.outerWidth<=parseInt("575")&&window.scroll(0,350),this.showFlashMessage("Has creado el comentario","alert alert-success col-md-6 mt-3 mx-auto text-center",1500),this._commentService.setUpdatedCommentList$(!0))},e=>{window.outerWidth<=parseInt("575")&&window.scroll(0,350),this.showFlashMessage("No has creado el comentario","alert alert-danger col-md-6 mt-3 mx-auto text-center",1500)})}setCommentFormValues(){var e;this.comment.setContent(null===(e=this.form.get("content"))||void 0===e?void 0:e.value)}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let o="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(o=`El campo ${t} es obligatorio`),o}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](u.K),c["\u0275\u0275directiveInject"](h.O),c["\u0275\u0275directiveInject"](i.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["create-comment"]],inputs:{post:"post"},decls:9,vars:3,consts:[[1,"text-center",3,"formGroup"],["for","mensaje"],["formControlName","content","id","mensaje","cols","30","rows","5",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],["type","button","value","Comentar",1,"btn","btn-success","mt-3",3,"disabled","click"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275element"](0,"flash-messages"),c["\u0275\u0275elementStart"](1,"form",0),c["\u0275\u0275elementStart"](2,"label",1),c["\u0275\u0275elementStart"](3,"h4"),c["\u0275\u0275text"](4,"\xbfQu\xe9 quieres comentar?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"textarea",2),c["\u0275\u0275text"](6,"    "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](7,L,2,1,"span",3),c["\u0275\u0275elementStart"](8,"input",4),c["\u0275\u0275listener"]("click",function(){return t.createComment()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("content"))),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[i.cS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,o.NgIf],styles:["form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}"]}),e})();function O(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275elementStart"](1,"div"),c["\u0275\u0275elementStart"](2,"button",4),c["\u0275\u0275element"](3,"span",5),c["\u0275\u0275text"](4," Cargando... "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function q(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"input",21),c["\u0275\u0275listener"]("click",function(){c["\u0275\u0275restoreView"](e);const t=c["\u0275\u0275nextContext"](3);return t.markAsInadequate(t.post.id)}),c["\u0275\u0275elementEnd"]()}}const j=function(){return["/login"]};function N(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h6",22),c["\u0275\u0275text"](1," Para poner un comentario inicia sesi\xf3n "),c["\u0275\u0275elementStart"](2,"a",23),c["\u0275\u0275text"](3,"aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction0"](1,j)))}function U(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",24),c["\u0275\u0275element"](1,"create-comment",19),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("post",e.post)}}const A=function(e){return["/user-details",e]};function V(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",8),c["\u0275\u0275element"](1,"img",9),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"a",10),c["\u0275\u0275elementStart"](5,"h6"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"span",11),c["\u0275\u0275elementStart"](8,"h6"),c["\u0275\u0275text"](9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"span",12),c["\u0275\u0275elementStart"](11,"h6"),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"amCalendar"),c["\u0275\u0275pipe"](14,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"span",13),c["\u0275\u0275elementStart"](16,"h6"),c["\u0275\u0275text"](17),c["\u0275\u0275pipe"](18,"amCalendar"),c["\u0275\u0275pipe"](19,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](20,"div",14),c["\u0275\u0275template"](21,q,1,0,"input",15),c["\u0275\u0275template"](22,N,4,2,"h6",16),c["\u0275\u0275elementStart"](23,"div",17),c["\u0275\u0275elementStart"](24,"div",18),c["\u0275\u0275element"](25,"comment-list",19),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](26,U,2,1,"div",20),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("src",e.postImage,c["\u0275\u0275sanitizeUrl"]),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.post.title),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](22,A,e.post.user.id)),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.post.user.nick),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate"](e.post.category?e.post.category.name:"Categor\xeda borrada"),c["\u0275\u0275advance"](3),c["\u0275\u0275textInterpolate1"]("Publicado ",c["\u0275\u0275pipeBind1"](13,12,c["\u0275\u0275pipeBind2"](14,14,e.post.createdAt,"es")),""),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"]("Modificado ",c["\u0275\u0275pipeBind1"](18,17,c["\u0275\u0275pipeBind2"](19,19,e.post.updatedAt,"es")),""),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("innerHTML",e.post.content,c["\u0275\u0275sanitizeHtml"]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==(null==e.user?null:e.user.roles[0])),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.user),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("post",e.post),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.user)}}function B(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",25),c["\u0275\u0275text"](1,"Este post ha sido marcado como inadecuado"),c["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(c["\u0275\u0275template"](0,V,27,24,"div",6),c["\u0275\u0275template"](1,B,2,0,"ng-template",null,7,c["\u0275\u0275templateRefExtractor"])),2&e){const e=c["\u0275\u0275reference"](2),t=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("ngIf",!t.post.inadequate)("ngIfElse",e)}}let R=(()=>{class e{constructor(e,t,n,o,a){this._postService=e,this._userService=t,this._route=n,this._router=o,this._sanitizer=a,this.user=this._userService.getUserLoggedIn(),this.loading=!0,this.postSubscription=new m.w,this.postImageSubscription=new m.w,this.inadequateSubscription=new m.w}ngOnInit(){this.getRouteParams()}ngOnDestroy(){this.postSubscription.unsubscribe(),this.postImageSubscription.unsubscribe(),this.inadequateSubscription.unsubscribe()}getRouteParams(){this._route.params.subscribe(e=>{this.getPost(e.title)})}getPost(e){this.postSubscription=this._postService.getPost(e).subscribe(e=>{e?(this.loading=!1,this.post=e,this.postImage=this.post.image,this.loadImage()):this.loading=!0},e=>{this._router.navigate([""])})}loadImage(){this.postImage?this.postImageSubscription=this._postService.getImage(this.postImage).subscribe(e=>{let t=URL.createObjectURL(e);this.postImage=this._sanitizer.bypassSecurityTrustUrl(t)},e=>{this.postImage="assets/images/no-post-image.jpg"}):this.postImage="assets/images/no-post-image.jpg"}markAsInadequate(e){this.inadequateSubscription=this._postService.inadequate(e).subscribe(e=>{e&&this.getRouteParams()},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.L),c["\u0275\u0275directiveInject"](u.K),c["\u0275\u0275directiveInject"](s.gz),c["\u0275\u0275directiveInject"](s.F0),c["\u0275\u0275directiveInject"](p.H7))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["watch-post"]],decls:4,vars:2,consts:[[1,"row","column"],["class","mx-auto",4,"ngIf","ngIfElse"],["data",""],[1,"mx-auto"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["class","col-md-12 mt-3",4,"ngIf","ngIfElse"],["inadequate",""],[1,"col-md-12","mt-3"],["id","postImage","alt","Imagen del post",3,"src"],[1,"badge","rounded-pill","badge-primary","mr-2",3,"routerLink"],["id","categoryPill",1,"badge","rounded-pill","mr-2","bg-warning"],[1,"badge","rounded-pill","badge-secondary","mr-2"],[1,"badge","rounded-pill","badge-secondary"],["id","postContent",1,"mt-3","mb-3",3,"innerHTML"],["type","button","value","Marcar post como inadecuado","class","btn btn-info",3,"click",4,"ngIf"],["class","alert alert-info text-center col-4 mx-auto",4,"ngIf"],[1,"row","mt-3"],[1,"col-sm-5","col-md-6","col-12","pb-4"],[3,"post"],["class","col-lg-4 col-md-5 col-sm-4 offset-md-1 offset-sm-1 col-12 mt-1",4,"ngIf"],["type","button","value","Marcar post como inadecuado",1,"btn","btn-info",3,"click"],[1,"alert","alert-info","text-center","col-4","mx-auto"],[3,"routerLink"],[1,"col-lg-4","col-md-5","col-sm-4","offset-md-1","offset-sm-1","col-12","mt-1"],[1,"mx-auto","mt-5"]],template:function(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275template"](1,O,5,0,"div",1),c["\u0275\u0275template"](2,T,3,2,"ng-template",null,2,c["\u0275\u0275templateRefExtractor"]),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275reference"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.loading)("ngIfElse",e)}},directives:[o.NgIf,s.yS,P,F],pipes:[r.tp,r.Ue],styles:[".column[_ngcontent-%COMP%]{margin-top:8%}#postImage[_ngcontent-%COMP%]{width:56%;height:12%}#postContent[_ngcontent-%COMP%]{width:50%;color:#000;background-color:#e5e7e9}a[_ngcontent-%COMP%]:first-of-type{cursor:pointer}"]}),e})();var z=n(4338);const $=[{path:"",children:[{path:":title",component:R},{path:":title/page/:page",component:R},{path:"categories/:name",component:z.O},{path:"categories/:name/page/:page",component:z.O},{path:"**",redirectTo:""}]}];let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[s.Bz.forChild($)],s.Bz]}),e})(),H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,a.JF,i.qz.forRoot(),r._G,s.Bz,G,l.UX]]}),e})()}}]);