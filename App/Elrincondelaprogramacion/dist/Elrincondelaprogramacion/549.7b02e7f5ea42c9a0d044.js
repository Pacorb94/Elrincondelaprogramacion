(self.webpackChunkelrincondelaprogramacion=self.webpackChunkelrincondelaprogramacion||[]).push([[549],{3771:(e,t,n)=>{"use strict";n.d(t,{G:()=>i,T:()=>s});var r=n(639),i=function(){function e(e,t,n){this.el=e,this.vcr=t,this.renderer=n,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(){e.displayTable()}):this.displayTable()},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(){var e=this,t=this;this.dtInstance=new Promise(function(n,r){Promise.resolve(e.dtOptions).then(function(r){setTimeout(function(){var i={rowCallback:function(n,i,a){if(r.columns){var s=r.columns;s.filter(function(e){return e.ngPipeInstance&&!e.ngTemplateRef}).forEach(function(e){var t=e.ngPipeInstance,r=s.findIndex(function(t){return t.data==e.data}),i=n.childNodes.item(r),a=$(i).text(),o=t.transform(a);$(i).text(o)}),s.filter(function(e){return e.ngTemplateRef&&!e.ngPipeInstance}).forEach(function(e){var r=e.ngTemplateRef,a=r.ref,o=r.context,l=s.findIndex(function(t){return t.data==e.data}),c=n.childNodes.item(l),m=Object.assign({},o,null==o?void 0:o.userData,{adtData:i}),d=t.vcr.createEmbeddedView(a,m);t.renderer.appendChild(c,d.rootNodes[0])})}e.dtOptions.rowCallback&&e.dtOptions.rowCallback(n,i,a)}};i=Object.assign({},r,i),e.dt=$(e.el.nativeElement).DataTable(i),n(e.dt)})})})},e.ctorParameters=function(){return[{type:r.ElementRef},{type:r.ViewContainerRef},{type:r.Renderer2}]},e.propDecorators={dtOptions:[{type:r.Input}],dtTrigger:[{type:r.Input}]},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.ViewContainerRef),r["\u0275\u0275directiveInject"](r.Renderer2))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),a=n(8583),s=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[a.CommonModule]]}),e}()},6549:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserModule:()=>q});var r=n(8583),i=n(6901),a=n(665);class s{constructor(e,t,n,r,i,a){this.id=e,this.nick=t,this.email=n,this.password=r,this.profileImage=i,this.role="ROLE_READER",this.ban=a,this.createdAt=Date.now()}setNick(e){this.nick=e}setEmail(e){this.email=e}setPassword(e){this.password=e}setProfileImage(e){this.profileImage=e}setRole(e){this.role=e}setBan(e){this.ban=e}setUpdatedAt(e){this.updatedAt=e}getId(){return this.id}getNick(){return this.nick}getEmail(){return this.email}getPassword(){return this.password}getProfileImage(){return this.profileImage}getRole(){return this.role}getBan(){return this.ban}getCreatedAt(){return this.createdAt}getUpdatedAt(){return this.updatedAt}}var o=n(5319),l=n(639),c=n(4454),m=n(4372);const d=function(){return["/login"]};function p(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h6",11),l["\u0275\u0275text"](1," Te has registrado correctamente, inicia sesi\xf3n "),l["\u0275\u0275elementStart"](2,"a",12),l["\u0275\u0275text"](3,"aqu\xed"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](1,d)))}function u(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",13),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("nick"),"nombre de usuario")," ")}}function g(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",13),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("email"),"email")," ")}}function h(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",13),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("password"),"contrase\xf1a")," ")}}let f=(()=>{class e{constructor(e,t){this._userService=e,this._flashMessagesService=t,this.user=new s(null,"","","",null,!1),this.goodRegister=!1,this.form=new a.cw({nick:new a.NI("",a.kI.required),email:new a.NI("",a.kI.email),password:new a.NI("",a.kI.required)}),this.registerSubscription=new o.w}ngOnDestroy(){this.registerSubscription.unsubscribe()}register(){this.setUserFormValues(),this.registerSubscription=this._userService.register(this.user).subscribe(e=>{this.goodRegister=!!e},e=>{window.scroll(0,50),this.showFlashMessage("No te has registrado correctamente","alert alert-danger col-md-3 mt-3 mx-auto",1500),this.goodRegister=!1})}setUserFormValues(){var e,t,n;this.user.setNick(null===(e=this.form.get("nick"))||void 0===e?void 0:e.value),this.user.setEmail(null===(t=this.form.get("email"))||void 0===t?void 0:t.value),this.user.setPassword(null===(n=this.form.get("password"))||void 0===n?void 0:n.value)}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n,r;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)?i=`El campo ${t} es obligatorio`:(null===(r=e.errors)||void 0===r?void 0:r.email)&&(i=`El campo ${t} es incorrecto`),i}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](c.K),l["\u0275\u0275directiveInject"](m.GQ))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["register"]],decls:21,vars:6,consts:[["id","register",1,"col-md-12","mt-5","text-center"],["class","alert alert-success col-md-4 mt-3 mx-auto",4,"ngIf"],[1,"col-md-3","ml-0","pl-0","mx-auto",3,"formGroup"],["for","nick"],["type","text","name","nick","id","nick","formControlName","nick",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["for","email"],["type","email","name","email","id","email","formControlName","email","placeholder","ejemplo@ejemplo.ejemplo",1,"form-control","text-center"],["for","password"],["type","password","name","password","id","password","formControlName","password",1,"form-control","text-center"],["type","button","value","Crear cuenta",1,"btn","btn-success",3,"disabled","click"],[1,"alert","alert-success","col-md-4","mt-3","mx-auto"],[3,"routerLink"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"h1"),l["\u0275\u0275text"](2,"Registro"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](3,"hr"),l["\u0275\u0275template"](4,p,4,2,"h6",1),l["\u0275\u0275element"](5,"flash-messages"),l["\u0275\u0275elementStart"](6,"form",2),l["\u0275\u0275elementStart"](7,"label",3),l["\u0275\u0275text"](8,"Nombre de usuario:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](9,"input",4),l["\u0275\u0275template"](10,u,2,1,"span",5),l["\u0275\u0275elementStart"](11,"label",6),l["\u0275\u0275text"](12,"Email:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](13,"input",7),l["\u0275\u0275template"](14,g,2,1,"span",5),l["\u0275\u0275elementStart"](15,"label",8),l["\u0275\u0275text"](16,"Contrase\xf1a:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](17,"input",9),l["\u0275\u0275template"](18,h,2,1,"span",5),l["\u0275\u0275element"](19,"br"),l["\u0275\u0275elementStart"](20,"input",10),l["\u0275\u0275listener"]("click",function(){return t.register()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.goodRegister),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("formGroup",t.form),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("nick"))),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("email"))),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("password"))),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[r.NgIf,m.cS,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,i.yS],styles:["#register[_ngcontent-%COMP%]{margin-top:8%!important}"]}),e})();const v=["check"];function b(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",14),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("email"),"email")," ")}}function I(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"span",14),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("password"),"contrase\xf1a")," ")}}let x=(()=>{class e{constructor(e,t,n,r){this._userService=e,this._router=t,this._flashMessagesService=n,this._cdRef=r,this.form=new a.cw({email:new a.NI("",[a.kI.required,a.kI.email]),password:new a.NI("",a.kI.required),check:new a.NI(!1)}),this.subscription=new o.w}ngAfterViewInit(){this.fillEmailAndMarkCheckbox()}ngOnDestroy(){this.subscription.unsubscribe()}fillEmailAndMarkCheckbox(){var e;localStorage.hasOwnProperty("rememberEmail")&&(null===(e=this.form.get("email"))||void 0===e||e.setValue(localStorage.getItem("rememberEmail")),this.checkbox.nativeElement.checked=!0,this._cdRef.detectChanges())}login(){var e,t;let n=null===(e=this.form.get("email"))||void 0===e?void 0:e.value,r=null===(t=this.form.get("password"))||void 0===t?void 0:t.value;this.subscription=this._userService.login(n,r).subscribe(e=>{e&&(e[0].banned?(localStorage.clear(),window.scroll(0,60),this.showFlashMessage("No puedes iniciar sesi\xf3n porque has sido baneado/a","alert alert-danger col-md-4 mt-3 mx-auto",3e3)):(this.user=e[0],localStorage.setItem("user",JSON.stringify(this.user)),localStorage.setItem("password",r),localStorage.hasOwnProperty("rememberEmail")&&localStorage.setItem("rememberEmail",this.user.email),this._userService.setUserLoggedIn$(this.user),this._router.navigate([""])))},e=>{var t,n;window.scroll(0,60),this.showFlashMessage("No has iniciado sesi\xf3n correctamente","alert alert-danger col-md-4 mt-3 mx-auto",3e3),null===(t=this.form.get("password"))||void 0===t||t.setValue(null===(n=this.form.get("password"))||void 0===n?void 0:n.value)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}rememberEmail(e){var t,n;if(e.target.checked&&(null===(t=this.form.get("email"))||void 0===t?void 0:t.value)){let e=null===(n=this.form.get("email"))||void 0===n?void 0:n.value;localStorage.setItem("rememberEmail",e)}else 0==e.target.checked&&localStorage.hasOwnProperty("rememberEmail")&&localStorage.removeItem("rememberEmail")}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n,r;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.email)?i=`El campo ${t} es incorrecto`:(null===(r=e.errors)||void 0===r?void 0:r.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](c.K),l["\u0275\u0275directiveInject"](i.F0),l["\u0275\u0275directiveInject"](m.GQ),l["\u0275\u0275directiveInject"](l.ChangeDetectorRef))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["login"]],viewQuery:function(e,t){if(1&e&&l["\u0275\u0275viewQuery"](v,5),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.checkbox=e.first)}},decls:24,vars:4,consts:[["id","login",1,"col-md-12","mt-5","text-center"],[1,"alert","alert-info","col-md-3","mx-auto","text-center"],["routerLink","/register"],[1,"col-md-3","ml-0","pl-0","mx-auto",3,"formGroup"],["for","email"],["type","email","name","email","id","email","formControlName","email","placeholder","ejemplo@ejemplo.ejemplo",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["for","password"],["type","password","name","password","id","password","formControlName","password",1,"form-control","text-center"],[1,"mt-3"],["type","checkbox","id","rememberEmail",1,"form-check-input",3,"change"],["check",""],["for","rememberEmail",1,"form-check-label"],["type","button","value","Iniciar sesi\xf3n",1,"btn","btn-success","mt-3",3,"disabled","click"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275elementStart"](1,"h1"),l["\u0275\u0275text"](2,"Iniciar sesi\xf3n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](3,"hr"),l["\u0275\u0275element"](4,"flash-messages"),l["\u0275\u0275elementStart"](5,"h6",1),l["\u0275\u0275text"](6," Si no tienes una cuenta reg\xedstrate "),l["\u0275\u0275elementStart"](7,"a",2),l["\u0275\u0275text"](8,"aqu\xed"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"form",3),l["\u0275\u0275elementStart"](10,"label",4),l["\u0275\u0275text"](11,"Email:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](12,"input",5),l["\u0275\u0275template"](13,b,2,1,"span",6),l["\u0275\u0275elementStart"](14,"label",7),l["\u0275\u0275text"](15,"Contrase\xf1a:"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](16,"input",8),l["\u0275\u0275template"](17,I,2,1,"span",6),l["\u0275\u0275elementStart"](18,"div",9),l["\u0275\u0275elementStart"](19,"input",10,11),l["\u0275\u0275listener"]("change",function(e){return t.rememberEmail(e)}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"label",12),l["\u0275\u0275text"](22,"Recuerdame"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"input",13),l["\u0275\u0275listener"]("click",function(){return t.login()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("formGroup",t.form),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("email"))),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("password"))),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[m.cS,i.yS,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,r.NgIf],styles:["#login[_ngcontent-%COMP%]{margin-top:8%!important}"]}),e})();var w=n(2340),S=n(7709),E=n(9075),y=n(3771),k=n(7203);function C(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h5"),l["\u0275\u0275text"](1,"No ha hecho posts"),l["\u0275\u0275elementEnd"]())}function _(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"button",11),l["\u0275\u0275element"](1,"span",12),l["\u0275\u0275text"](2," Cargando... "),l["\u0275\u0275elementEnd"]())}function j(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",8),l["\u0275\u0275template"](1,C,2,0,"h5",9),l["\u0275\u0275template"](2,_,3,0,"button",10),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.noPosts),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.noPosts)}}function P(e,t){if(1&e&&l["\u0275\u0275element"](0,"img",22),2&e){const e=l["\u0275\u0275nextContext"]().$implicit,t=l["\u0275\u0275nextContext"](3);l["\u0275\u0275property"]("src",t.imageUrl+e.image,l["\u0275\u0275sanitizeUrl"])}}function T(e,t){1&e&&l["\u0275\u0275element"](0,"img",23)}const O=function(e){return["/posts",e]};function M(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td"),l["\u0275\u0275elementStart"](2,"a",16),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"td"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"td"),l["\u0275\u0275template"](7,P,1,1,"img",17),l["\u0275\u0275template"](8,T,1,0,"img",18),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"amCalendar"),l["\u0275\u0275pipe"](12,"amLocale"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"td"),l["\u0275\u0275text"](14),l["\u0275\u0275pipe"](15,"amCalendar"),l["\u0275\u0275pipe"](16,"amLocale"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"td"),l["\u0275\u0275elementStart"](18,"div",2),l["\u0275\u0275elementStart"](19,"div",19),l["\u0275\u0275elementStart"](20,"a",20),l["\u0275\u0275element"](21,"img",21),l["\u0275\u0275text"](22,"Ver "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](18,O,e.title)),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e.title),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](e.category?e.category.name:"Categor\xeda borrada"),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.image),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.image),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](11,8,l["\u0275\u0275pipeBind2"](12,10,e.createdAt,"es"))),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](15,13,l["\u0275\u0275pipeBind2"](16,15,e.updatedAt,"es"))),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](20,O,e.title))}}function N(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",13),l["\u0275\u0275elementStart"](1,"table",14),l["\u0275\u0275elementStart"](2,"thead"),l["\u0275\u0275elementStart"](3,"tr"),l["\u0275\u0275elementStart"](4,"th"),l["\u0275\u0275text"](5,"T\xedtulo"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"th"),l["\u0275\u0275text"](7,"Categor\xeda"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"th"),l["\u0275\u0275text"](9,"Imagen"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"th"),l["\u0275\u0275text"](11,"Fecha de creaci\xf3n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"th"),l["\u0275\u0275text"](13,"Fecha de modificaci\xf3n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"th"),l["\u0275\u0275text"](15,"Acci\xf3n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"tbody"),l["\u0275\u0275template"](17,M,23,22,"tr",15),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l["\u0275\u0275advance"](16),l["\u0275\u0275property"]("ngForOf",e.posts)}}function R(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",2),l["\u0275\u0275element"](2,"img",3),l["\u0275\u0275elementStart"](3,"h3",4),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"span",5),l["\u0275\u0275elementStart"](6,"h6"),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"amCalendar"),l["\u0275\u0275pipe"](9,"amLocale"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](10,j,3,2,"div",6),l["\u0275\u0275template"](11,N,18,3,"div",7),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("src",e.profileImage,l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](null==e.user?null:e.user.nick),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("Se uni\xf3 el ",l["\u0275\u0275pipeBind1"](8,5,l["\u0275\u0275pipeBind2"](9,7,null==e.user?null:e.user.createdAt,"es")),""),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.loading),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!e.noPosts)}}function U(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"h3",24),l["\u0275\u0275text"](1,"Usuario/a baneado/a"),l["\u0275\u0275elementEnd"]())}let F=(()=>{class e{constructor(e,t,n){this._route=e,this._userService=t,this._sanitizer=n,this.posts=[],this.loading=!0,this.imageUrl=`${w.N.url}/posts-images/`,this.userSubscription=new o.w,this.postsSubscription=new o.w,this.loadProfileImageSubscription=new o.w,this.dtOptions={},this.dtTrigger=new S.xQ}ngOnInit(){this.getRouteParams(),this.loadTableConfiguration()}ngOnDestroy(){this.userSubscription.unsubscribe(),this.loadProfileImageSubscription.unsubscribe(),this.postsSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getRouteParams(){this._route.params.subscribe(e=>{let t=e.id;this.getUser(t),this.getUserPosts(t)})}getUser(e){this.userSubscription=this._userService.getUser(e).subscribe(e=>{e&&(this.user=e,this.profileImage=this.user.profileImage,this.loadProfileImage())},e=>{})}loadProfileImage(){this.profileImage?this.loadProfileImageSubscription=this._userService.getProfileImage(this.profileImage).subscribe(e=>{let t=URL.createObjectURL(e);this.profileImage=this._sanitizer.bypassSecurityTrustUrl(t)},e=>{this.profileImage="assets/images/no-profile-image.png"}):this.profileImage="assets/images/no-profile-image.png"}getUserPosts(e){this.postsSubscription=this._userService.getUserPosts(e).subscribe(e=>{e.length?(this.loading=!1,this.noPosts=!1,this.posts=e,this.dtTrigger.next()):(this.loading=!0,this.noPosts=!0)},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](i.gz),l["\u0275\u0275directiveInject"](c.K),l["\u0275\u0275directiveInject"](E.H7))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["user-details"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["banned",""],[1,"row"],["alt","Imagen de perfil",1,"profileImage","mr-1",3,"src"],[1,"mr-3"],[1,"badge","badge-primary","mt-2","rounded-pill","h-25"],["class","text-center mt-5",4,"ngIf"],["class","row mx-auto mt-5",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"row","mx-auto","mt-5"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"routerLink"],["alt","Imagen del post","class","w-25",3,"src",4,"ngIf"],["src","assets/images/no-post-image.jpg","alt","Imagen del post","class","w-25",4,"ngIf"],[1,"col-xs-12","col-md-12","col-sm-12","col-lg-12","mx-auto"],["id","fila",1,"btn","btn-success","w-25","mx-auto",3,"routerLink"],["src","assets/images/watch-icon.png","alt","Imagen de ver post",1,"w-50"],["alt","Imagen del post",1,"w-25",3,"src"],["src","assets/images/no-post-image.jpg","alt","Imagen del post",1,"w-25"],["id","banned",1,"text-center","mt-5"]],template:function(e,t){if(1&e&&(l["\u0275\u0275template"](0,R,12,10,"div",0),l["\u0275\u0275template"](1,U,2,0,"ng-template",null,1,l["\u0275\u0275templateRefExtractor"])),2&e){const e=l["\u0275\u0275reference"](2);l["\u0275\u0275property"]("ngIf",!(null!=t.user&&t.user.banned))("ngIfElse",e)}},directives:[r.NgIf,y.G,r.NgForOf,i.yS],pipes:[k.tp,k.Ue],styles:[".profileImage[_ngcontent-%COMP%]{vertical-align:middle;width:50px;height:50px;border-radius:50%}div[_ngcontent-%COMP%]:first-of-type{margin-top:8%!important}#fila[_ngcontent-%COMP%]{position:relative!important;top:-25px!important}#banned[_ngcontent-%COMP%]{margin-top:8%!important}"]}),e})(),A=(()=>{class e{constructor(e,t){this._userService=e,this._router=t,this.user=this._userService.getUserLoggedIn()}canActivate(){return!this.user||(this._router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](c.K),l["\u0275\u0275inject"](i.F0))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const L=[{path:"",children:[{path:"register",component:f,canActivate:[A]},{path:"login",component:x,canActivate:[A]},{path:"user-details/:id",component:F},{path:"user-panel",loadChildren:()=>Promise.all([n.e(592),n.e(9)]).then(n.bind(n,6009)).then(e=>e.UserPanelModule),canActivate:[(()=>{class e{constructor(e,t){this._userService=e,this._router=t,this.user=this._userService.getUserLoggedIn()}canActivate(){return!!this.user||(this._router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](c.K),l["\u0275\u0275inject"](i.F0))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"**",redirectTo:""}]}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[i.Bz.forChild(L)],i.Bz]}),e})();var D=n(1841);let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,a.UX,D.JF,m.qz.forRoot(),V,k._G,y.T]]}),e})()}}]);