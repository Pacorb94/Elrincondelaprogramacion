(self.webpackChunkelrincondelaprogramacion=self.webpackChunkelrincondelaprogramacion||[]).push([[9],{6009:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserPanelModule:()=>on});var i=n(8583),r=n(4372),s=n(1841),o=n(665),a=n(6901),l=n(5319),d=n(7709),c=n(639),m=n(4454),p=n(3771),u=n(7203);function h(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No tienes comentarios"),c["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,h,2,0,"h5",4),c["\u0275\u0275template"](2,g,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noComments),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noComments)}}const v=function(e){return["/posts",e]};function b(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"amCalendar"),c["\u0275\u0275pipe"](7,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"amCalendar"),c["\u0275\u0275pipe"](11,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275elementStart"](13,"div",12),c["\u0275\u0275elementStart"](14,"div",13),c["\u0275\u0275elementStart"](15,"a",14),c["\u0275\u0275element"](16,"img",15),c["\u0275\u0275text"](17,"Ver "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](15,v,e.post.title)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.post.title),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](6,5,c["\u0275\u0275pipeBind2"](7,7,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](10,10,c["\u0275\u0275pipeBind2"](11,12,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](17,v,e.post.title))}}function x(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"Post en el que se public\xf3"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Fecha de creaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Acci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"tbody"),c["\u0275\u0275template"](13,b,18,19,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngForOf",e.comments)}}let S=(()=>{class e{constructor(e,t){this._userService=e,this._router=t,this.user=this._userService.getUserLoggedIn(),this.comments=[],this.loading=!0,this.commentsSubscription=new l.w,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){this.loadTableConfiguration(),this.getUserComments()}ngOnDestroy(){this.commentsSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getUserComments(){this.commentsSubscription=this._userService.getComments(this.user.id).subscribe(e=>{e.length>0?(this.comments=e,this.loading=!1,this.noComments=!1,this.dtTrigger.next()):(this.loading=!0,this.noComments=!0)},e=>{this._router.navigate([""])})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](a.F0))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["my-comments"]],decls:5,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","mx-auto","text-center"],[1,"btn","btn-success","w-50","d-flex","align-items-center","mx-auto",3,"routerLink"],["src","assets/images/watch-icon.png","alt","Imagen de ver post",1,"w-50"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Mis comentarios"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,f,3,2,"div",1),c["\u0275\u0275template"](4,x,14,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.noComments))},directives:[i.NgIf,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:[""]}),e})();var y=n(7267);function I(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h6",8),c["\u0275\u0275text"](1," Has editado la categor\xeda, puedes verla "),c["\u0275\u0275elementStart"](2,"a",9),c["\u0275\u0275text"](3,"aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",10),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("name"),"nombre")," ")}}let w=(()=>{class e{constructor(e,t,n,i,r){this._categoryService=e,this._userService=t,this._route=n,this._router=i,this._flashMessagesService=r,this.form=new o.cw({name:new o.NI("",o.kI.required)}),this.goodEdit=!1,this.categorySubscription=new l.w,this.updateSubscription=new l.w}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.getRouteCategory()}ngOnDestroy(){this.categorySubscription.unsubscribe(),this.updateSubscription.unsubscribe()}getRouteCategory(){this._route.params.subscribe(e=>{e.name?this.getCategory(e.name):this._router.navigate([""])})}getCategory(e){this.categorySubscription=this._categoryService.getCategory(e).subscribe(e=>{let t=this._userService.getUserLoggedIn();e&&e.user.id==t.id?(this.category=e,this.setFormValue()):this._router.navigate([""])},e=>{this._router.navigate([""])})}setFormValue(){var e;null===(e=this.form.get("name"))||void 0===e||e.setValue(this.category.name)}update(){this.setCategoryFormValues(),this.updateSubscription=this._categoryService.update(this.category).subscribe(e=>{e?(this.goodEdit=!0,this._categoryService.setUpdateNavbarCategoryList$(!0),this.category=e,window.outerWidth<=parseInt("575")&&window.scroll(0,550)):this.goodEdit=!1},e=>{window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.showFlashMessage("No has editado la categor\xeda","alert alert-danger col-md-5 mt-3 mx-auto",3e3)})}setCategoryFormValues(){var e,t;(null===(e=this.form.get("name"))||void 0===e?void 0:e.value)&&(this.category.name=null===(t=this.form.get("name"))||void 0===t?void 0:t.value)}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](y.H),c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](a.gz),c["\u0275\u0275directiveInject"](a.F0),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["edit-category"]],decls:13,vars:4,consts:[["id","edit",1,"row","text-center"],[1,"col-xs-9","col-sm-12","col-xl-12","col-md-12","col-lg-12","offset-md-2","offset-sm-2","offset-lg-2","col-12"],["class","alert alert-success col-md-5 mt-3 mx-auto",4,"ngIf"],[1,"col-md-3","ml-0","pl-0","mx-auto",3,"formGroup"],["for","name"],["type","text","name","name","id","name","formControlName","name",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["type","button","value","Editar categor\xeda",1,"btn","btn-success","mt-2",3,"disabled","click"],[1,"alert","alert-success","col-md-5","mt-3","mx-auto"],["routerLink","/user-panel/category-list"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Editar categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275template"](5,I,4,0,"h6",2),c["\u0275\u0275element"](6,"flash-messages"),c["\u0275\u0275elementStart"](7,"form",3),c["\u0275\u0275elementStart"](8,"label",4),c["\u0275\u0275text"](9,"Nombre:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"input",5),c["\u0275\u0275template"](11,E,2,1,"span",6),c["\u0275\u0275elementStart"](12,"input",7),c["\u0275\u0275listener"]("click",function(){return t.update()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.goodEdit),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("name"))),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[i.NgIf,r.cS,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,a.yS],styles:["#edit[_ngcontent-%COMP%]{margin-top:-.5%!important}"]}),e})();var C=n(2340);function _(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No hay usuarios"),c["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,_,2,0,"h5",4),c["\u0275\u0275template"](2,k,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noUsers),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noUsers)}}function F(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"Administrador/a"),c["\u0275\u0275elementEnd"]())}function L(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"Redactor/a"),c["\u0275\u0275elementEnd"]())}function T(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"td"),c["\u0275\u0275text"](1,"Lector/a"),c["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",33),2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("src",t.profileImageUrl+e.profileImage,c["\u0275\u0275sanitizeUrl"])}}function q(e,t){1&e&&c["\u0275\u0275element"](0,"img",34)}function U(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1," No puedes modificar el rol de este usuario/a "),c["\u0275\u0275elementEnd"]())}function N(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"button",35),c["\u0275\u0275listener"]("click",function(){return c["\u0275\u0275restoreView"](e),c["\u0275\u0275nextContext"](3).getRoles()}),c["\u0275\u0275element"](1,"img",36),c["\u0275\u0275text"](2," Editar rol "),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275attribute"]("data-target","#update"+e.id)}}function M(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",37),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"](3);c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("roles"),"roles")," ")}}const j=function(e){return["/user-details",e]};function V(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementContainerStart"](4,12),c["\u0275\u0275template"](5,F,2,0,"td",13),c["\u0275\u0275template"](6,L,2,0,"td",13),c["\u0275\u0275template"](7,T,2,0,"td",14),c["\u0275\u0275elementContainerEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275template"](9,A,1,1,"img",15),c["\u0275\u0275template"](10,q,1,0,"img",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"td"),c["\u0275\u0275text"](12),c["\u0275\u0275pipe"](13,"amCalendar"),c["\u0275\u0275pipe"](14,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](15,"td"),c["\u0275\u0275text"](16),c["\u0275\u0275pipe"](17,"amCalendar"),c["\u0275\u0275pipe"](18,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](19,"td"),c["\u0275\u0275elementStart"](20,"div",17),c["\u0275\u0275elementStart"](21,"div",18),c["\u0275\u0275template"](22,U,2,0,"span",4),c["\u0275\u0275template"](23,N,3,1,"button",19),c["\u0275\u0275elementStart"](24,"div",20),c["\u0275\u0275elementStart"](25,"div",21),c["\u0275\u0275elementStart"](26,"div",22),c["\u0275\u0275elementStart"](27,"div",23),c["\u0275\u0275elementStart"](28,"h4",24),c["\u0275\u0275text"](29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"button",25),c["\u0275\u0275text"](31," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",26),c["\u0275\u0275elementStart"](33,"form",27),c["\u0275\u0275element"](34,"select",28),c["\u0275\u0275template"](35,M,2,1,"span",29),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",30),c["\u0275\u0275elementStart"](37,"button",31),c["\u0275\u0275listener"]("click",function(){const t=c["\u0275\u0275restoreView"](e).$implicit;return c["\u0275\u0275nextContext"](2).updateRole(t)}),c["\u0275\u0275text"](38," Modificar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](39,"button",32),c["\u0275\u0275text"](40," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](26,j,e.id)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.nick),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngSwitch",e.roles[0]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngSwitchCase","ROLE_ADMIN"),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngSwitchCase","ROLE_WRITER"),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",e.profileImage),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.profileImage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](13,16,c["\u0275\u0275pipeBind2"](14,18,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](17,21,c["\u0275\u0275pipeBind2"](18,23,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf","admin"==e.nick||e.nick==n.userLoggedIn.nick||e.banned),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","admin"!=e.nick&&e.nick!=n.userLoggedIn.nick&&!e.banned),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate"]("id","update"+e.id),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" \xbfQuieres modificar el rol a ",e.nick,"? "),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("formGroup",n.form),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",n.checkTouched(n.form.get("roles"))),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!n.form.valid)}}function P(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"Nick"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Rol"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Fecha de registro"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Acci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"tbody"),c["\u0275\u0275template"](17,V,41,28,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](17),c["\u0275\u0275property"]("ngForOf",e.users)}}let R=(()=>{class e{constructor(e,t){this._userService=e,this._flashMessagesService=t,this.users=[],this.roles=[],this.profileImageUrl=`${C.N.url}/profile-images/`,this.userLoggedIn=this._userService.getUserLoggedIn(),this.usersSubscription=new l.w,this.rolesSubscription=new l.w,this.updateRoleSubscription=new l.w,this.form=new o.cw({roles:new o.NI("",o.kI.required)}),this.loading=!0,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getUsers()}ngOnDestroy(){this.usersSubscription.unsubscribe(),this.rolesSubscription.unsubscribe(),this.updateRoleSubscription.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getUsers(e=!1){this.usersSubscription=this._userService.getUsers().subscribe(t=>{t.length?(this.users=t,this.loading=!1,this.noUsers=!1,e||this.dtTrigger.next()):(this.loading=!0,this.noUsers=!0)},e=>{})}getRoles(){this.rolesSubscription=this._userService.getRoles().subscribe(e=>{e&&(this.roles.frontend=["Administrador/a","Redactor/a","Lector/a"],this.roles.backend=e,this.createRolesSelectsOptions())},e=>{})}createRolesSelectsOptions(){let e=document.querySelectorAll('select[name="roles"]');for(let t of e){t.innerHTML="",t.insertAdjacentHTML("beforeend",'<option value="" hidden>Selecciona un rol</option>');for(let e=0;e<this.roles.backend.length;e++)t.insertAdjacentHTML("beforeend",`<option value="${this.roles.backend[e]}">${this.roles.frontend[e]}</option>`)}}updateRole(e){var t;e.roles[0]=null===(t=this.form.get("roles"))||void 0===t?void 0:t.value,this.updateRoleSubscription=this._userService.updateRole(e).subscribe(t=>{t&&(localStorage.setItem("updatedRole",e.nick),this.getUsers(!0),window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("Has modificado el rol del usuario","alert alert-success col-md-5 mt-3 mx-auto text-center",3e3))},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("No has modificado el rol del usuario","alert alert-danger col-md-5 mt-3 mx-auto text-center",3e3)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["update-role"]],decls:6,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["alt","Imagen del usuario","class","w-50",3,"src",4,"ngIf"],["src","assets/images/no-profile-image.png","alt","Imagen del usuario","class","w-50",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","col-xl-12","mt-2"],["type","button","class","btn btn-warning w-75 d-flex justify-content-center mx-auto","data-toggle","modal",3,"click",4,"ngIf"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"text-center",3,"formGroup"],["formControlName","roles","name","roles",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-success",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],["alt","Imagen del usuario",1,"w-50",3,"src"],["src","assets/images/no-profile-image.png","alt","Imagen del usuario",1,"w-50"],["type","button","data-toggle","modal",1,"btn","btn-warning","w-75","d-flex","justify-content-center","mx-auto",3,"click"],["src","assets/images/edit-icon.png","alt","Imagen de modificar usuario",1,"w-25"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Modificar rol de un/a usuario/a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,O,3,2,"div",1),c["\u0275\u0275element"](4,"flash-messages"),c["\u0275\u0275template"](5,P,18,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.noUsers))},directives:[i.NgIf,r.cS,p.G,i.NgForOf,a.yS,i.NgSwitch,i.NgSwitchCase,i.NgSwitchDefault,o._Y,o.JL,o.sg,o.EJ,o.JJ,o.u],pipes:[u.tp,u.Ue],styles:[""]}),e})();class D{constructor(e,t){this.id=e,this.name=t,this.createdAt=Date.now()}setName(e){this.name=e}setUpdatedAt(e){this.updatedAt=e}getId(){return this.id}getName(){return this.name}getCreatedAt(){return this.createdAt}getUpdatedAt(){return this.updatedAt}}function z(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h6",8),c["\u0275\u0275text"](1," Has creado la categor\xeda, puedes verla "),c["\u0275\u0275elementStart"](2,"a",9),c["\u0275\u0275text"](3,"aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function B(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",10),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("name"),"nombre")," ")}}let H=(()=>{class e{constructor(e,t){this._categoryService=e,this._flashMessagesService=t,this.category=new D(null,""),this.goodCreate=!1,this.goodCreate=!1,this.form=new o.cw({name:new o.NI("",o.kI.required)}),this.createSubscription=new l.w}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550)}ngOnDestroy(){this.createSubscription.unsubscribe()}create(){this.setCategoryFormValue(),this.createSubscription=this._categoryService.create(this.category).subscribe(e=>{e?(this.goodCreate=!0,this._categoryService.setUpdateNavbarCategoryList$(!0),window.outerWidth<=parseInt("575")&&window.scroll(0,600),this._categoryService.setLastAddedCategory$(this.category)):this.goodCreate=!1},e=>{this.goodCreate=!1,window.outerWidth<=parseInt("575")&&window.scroll(0,600),this.showFlashMessage("No has creado la categor\xeda","alert alert-danger col-md-5 mt-3 mx-auto",1500)})}setCategoryFormValue(){var e;this.category.setName(null===(e=this.form.get("name"))||void 0===e?void 0:e.value)}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](y.H),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["create-category"]],decls:13,vars:4,consts:[["id","create",1,"row","text-center"],[1,"col-xs-9","col-sm-12","col-xl-12","col-md-12","col-lg-12","offset-md-2","offset-sm-2","offset-lg-2","col-12"],["class","alert alert-success col-md-5 mt-3 mx-auto",4,"ngIf"],[1,"col-md-3","ml-0","pl-0","mx-auto",3,"formGroup"],["for","name"],["type","text","name","name","id","name","formControlName","name",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["type","button","value","Crear categor\xeda",1,"btn","btn-success","mt-2",3,"disabled","click"],[1,"alert","alert-success","col-md-5","mt-3","mx-auto"],["routerLink","/user-panel/category-list"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Crear categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275template"](5,z,4,0,"h6",2),c["\u0275\u0275element"](6,"flash-messages"),c["\u0275\u0275elementStart"](7,"form",3),c["\u0275\u0275elementStart"](8,"label",4),c["\u0275\u0275text"](9,"Nombre:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"input",5),c["\u0275\u0275template"](11,B,2,1,"span",6),c["\u0275\u0275elementStart"](12,"input",7),c["\u0275\u0275listener"]("click",function(){return t.create()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.goodCreate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("name"))),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[i.NgIf,r.cS,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,a.yS],styles:["#create[_ngcontent-%COMP%]{margin-top:-.5%!important}"]}),e})();var $=n(7639);function W(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})}var Q=n(9075),G=n(7574),J=n(9796),K=n(9105),Y=n(8002);function Z(e,t,n,i){return(0,K.m)(n)&&(i=n,n=void 0),i?Z(e,t,n).pipe((0,Y.U)(e=>(0,J.k)(e)?i(...e):i(e))):new G.y(i=>{X(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}function X(e,t,n,i,r){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const i=e;e.addEventListener(t,n,r),s=()=>i.removeEventListener(t,n,r)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const i=e;e.on(t,n),s=()=>i.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const i=e;e.addListener(t,n),s=()=>i.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)X(e[s],t,n,i,r)}i.add(s)}var ee=n(7393);class te extends l.w{constructor(e,t){super()}schedule(e,t=0){return this}}let ne=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class ie extends ne{constructor(e,t=ne.now){super(e,()=>ie.delegate&&ie.delegate!==this?ie.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return ie.delegate&&ie.delegate!==this?ie.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const re=new ie(class extends te{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,i=!1;try{this.work(e)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}});function se(e,t=re){return n=>n.lift(new oe(e,t))}class oe{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new ae(e,this.dueTime,this.scheduler))}}class ae extends ee.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(le,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function le(e){e.debouncedNext()}const de=[[["","quill-editor-toolbar",""]]],ce=["[quill-editor-toolbar]"],me={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},pe=(e,t)=>e||t||"html",ue=new c.InjectionToken("config",{providedIn:"root",factory:()=>({modules:me})});let he=(()=>{class e{constructor(e,t){this.config=t,this.count=0,this.document=e.get(i.DOCUMENT),this.config||(this.config={modules:me})}getQuill(){return this.count++,this.Quill||1!==this.count||(this.$importPromise=new Promise(e=>W(this,void 0,void 0,function*(){var t,i;const r=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;const s=yield n.e(161).then(n.t.bind(n,2161,23));this.document.addEventListener=r,this.Quill=s.default?s.default:s,null===(t=this.config.customOptions)||void 0===t||t.forEach(e=>{const t=this.Quill.import(e.import);t.whitelist=e.whitelist,this.Quill.register(t,!0,this.config.suppressGlobalRegisterWarning)}),null===(i=this.config.customModules)||void 0===i||i.forEach(({implementation:e,path:t})=>{this.Quill.register(t,e,this.config.suppressGlobalRegisterWarning)}),e(this.Quill)}))),this.$importPromise}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](c.Injector),c["\u0275\u0275inject"](ue,8))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({factory:function(){return new e(c["\u0275\u0275inject"](c.INJECTOR),c["\u0275\u0275inject"](ue,8))},token:e,providedIn:"root"}),e})(),ge=(()=>{class e{constructor(e,t,n,r,s,o,a,l){this.elementRef=t,this.cd=n,this.domSanitizer=r,this.platformId=s,this.renderer=o,this.zone=a,this.service=l,this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new c.EventEmitter,this.onEditorChanged=new c.EventEmitter,this.onContentChanged=new c.EventEmitter,this.onSelectionChanged=new c.EventEmitter,this.onFocus=new c.EventEmitter,this.onBlur=new c.EventEmitter,this.disabled=!1,this.subscription=null,this.valueGetter=(e,t)=>{let n=t.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==n&&"<div><br></div>"!==n||(n=this.defaultEmptyValue);let i=n;const r=pe(this.format,this.service.config.format);if("text"===r)i=e.getText();else if("object"===r)i=e.getContents();else if("json"===r)try{i=JSON.stringify(e.getContents())}catch(s){i=e.getText()}return i},this.valueSetter=(e,t)=>{const n=pe(this.format,this.service.config.format);if("html"===n)return this.sanitize&&(t=this.domSanitizer.sanitize(c.SecurityContext.HTML,t)),e.clipboard.convert(t);if("json"===n)try{return JSON.parse(t)}catch(i){return[{insert:t}]}return t},this.selectionChangeHandler=(e,t,n)=>{const i=!e&&!!this.onModelTouched;(this.onBlur.observers.length||this.onFocus.observers.length||this.onSelectionChanged.observers.length||i)&&this.zone.run(()=>{null===e?this.onBlur.emit({editor:this.quillEditor,source:n}):null===t&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:n}),i&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,n)=>{const i=this.quillEditor.getText(),r=this.quillEditor.getContents();let s=this.editorElem.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==s&&"<div><br></div>"!==s||(s=this.defaultEmptyValue);const o=this.trackChanges||this.service.config.trackChanges,a=("user"===n||o&&"all"===o)&&!!this.onModelChange;(this.onContentChanged.observers.length||a)&&this.zone.run(()=>{a&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:r,delta:e,editor:this.quillEditor,html:s,oldDelta:t,source:n,text:i}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,n,i)=>{if(this.onEditorChanged.observers.length)if("text-change"===e){const r=this.quillEditor.getText(),s=this.quillEditor.getContents();let o=this.editorElem.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==o&&"<div><br></div>"!==o||(o=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:s,delta:t,editor:this.quillEditor,event:e,html:o,oldDelta:n,source:i,text:r}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:n,range:t,source:i}),this.cd.markForCheck()})},this.document=e.get(i.DOCUMENT)}static normalizeClassNames(e){return e.trim().split(" ").reduce((e,t)=>{const n=t.trim();return n&&e.push(n),e},[])}ngAfterViewInit(){return W(this,void 0,void 0,function*(){if((0,i.isPlatformServer)(this.platformId))return;const e=yield this.service.getQuill();this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin",this.preserveWhitespace?"<pre quill-editor-element></pre>":"<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules||this.service.config.modules);t?n.toolbar=t:void 0===n.toolbar&&(n.toolbar=me.toolbar);let r=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===r&&(r="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(e=>{this.renderer.setStyle(this.editorElem,e,this.styles[e])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(t=>{const n=e.import(t.import);n.whitelist=t.whitelist,e.register(n,!0)}),this.customModules.forEach(({implementation:t,path:n})=>{e.register(n,t)});let s=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;s||(s=this.service.config.bounds?this.service.config.bounds:this.document.body);let o=this.debug;!o&&!1!==o&&this.service.config.debug&&(o=this.service.config.debug);let a=this.readOnly;a||!1===this.readOnly||(a=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let l=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(l=this.service.config.defaultEmptyValue);let d=this.scrollingContainer;d||null===this.scrollingContainer||(d=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let c=this.formats;if(c||void 0!==c||(c=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{var t,i,m;if(this.quillEditor=new e(this.editorElem,{bounds:s,debug:o,formats:c,modules:n,placeholder:r,readOnly:a,defaultEmptyValue:l,scrollingContainer:d,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const e=null===(i=null===(t=this.quillEditor)||void 0===t?void 0:t.theme)||void 0===i?void 0:i.tooltip,n=null===(m=null==e?void 0:e.root)||void 0===m?void 0:m.querySelector("input[data-link]");(null==n?void 0:n.dataset)&&(n.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===pe(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const e=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(e,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observers.length||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})})}ngOnDestroy(){this.dispose()}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){const t=e.styles.currentValue,n=e.styles.previousValue;n&&Object.keys(n).forEach(e=>{this.renderer.removeStyle(this.editorElem,e)}),t&&Object.keys(t).forEach(e=>{this.renderer.setStyle(this.editorElem,e,this.styles[e])})}if(e.classes){const t=e.classes.currentValue,n=e.classes.previousValue;n&&this.removeClasses(n),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(t){e.normalizeClassNames(t).forEach(e=>{this.renderer.addClass(this.editorElem,e)})}removeClasses(t){e.normalizeClassNames(t).forEach(e=>{this.renderer.removeClass(this.editorElem,e)})}writeValue(e){if(this.filterNull&&null===e)return;if(this.content=e,!this.quillEditor)return;const t=pe(this.format,this.service.config.format),n=this.valueSetter(this.quillEditor,e);if(this.compareValues){const e=this.quillEditor.getContents();if(JSON.stringify(e)===JSON.stringify(n))return}e?"text"===t?this.quillEditor.setText(e):this.quillEditor.setContents(n):this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;const e={};let t=!0;const n=this.quillEditor.getText(),i=this.trimOnValidation?n.trim().length:1===n.length&&0===n.trim().length?0:n.length-1,r=this.quillEditor.getContents().ops,s=r&&1===r.length&&["\n",""].includes(r[0].insert);return this.minLength&&i&&i<this.minLength&&(e.minLengthError={given:i,minLength:this.minLength},t=!1),this.maxLength&&i>this.maxLength&&(e.maxLengthError={given:i,maxLength:this.maxLength},t=!1),this.required&&!i&&s&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new l.w,this.subscription.add(Z(this.quillEditor,"selection-change").subscribe(([e,t,n])=>{this.selectionChangeHandler(e,t,n)}));let e=Z(this.quillEditor,"text-change"),t=Z(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(e=e.pipe(se(this.debounceTime)),t=t.pipe(se(this.debounceTime))),this.subscription.add(e.subscribe(([e,t,n])=>{this.textChangeHandler(e,t,n)})),this.subscription.add(t.subscribe(([e,t,n,i])=>{this.editorChangeHandler(e,t,n,i)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.Injector),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](Q.H7),c["\u0275\u0275directiveInject"](c.PLATFORM_ID),c["\u0275\u0275directiveInject"](c.Renderer2),c["\u0275\u0275directiveInject"](c.NgZone),c["\u0275\u0275directiveInject"](he))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,inputs:{required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",customOptions:"customOptions",customModules:"customModules",preserveWhitespace:"preserveWhitespace",trimOnValidation:"trimOnValidation",compareValues:"compareValues",filterNull:"filterNull",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter",format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges",classes:"classes",linkPlaceholder:"linkPlaceholder",debounceTime:"debounceTime"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[c["\u0275\u0275NgOnChangesFeature"]]}),e})(),fe=(()=>{class e extends ge{constructor(e,t,n,i,r,s,o,a){super(e,t,n,i,r,s,o,a)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.Injector),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](Q.H7),c["\u0275\u0275directiveInject"](c.PLATFORM_ID),c["\u0275\u0275directiveInject"](c.Renderer2),c["\u0275\u0275directiveInject"](c.NgZone),c["\u0275\u0275directiveInject"](he))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["quill-editor"]],features:[c["\u0275\u0275ProvidersFeature"]([{multi:!0,provide:o.JU,useExisting:(0,c.forwardRef)(()=>e)},{multi:!0,provide:o.Cf,useExisting:(0,c.forwardRef)(()=>e)}]),c["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:ce,decls:1,vars:0,template:function(e,t){1&e&&(c["\u0275\u0275projectionDef"](de),c["\u0275\u0275projection"](0))},styles:["\n    :host {\n      display: inline-block;\n    }\n    "],encapsulation:2}),e})(),ve=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:ue,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.CommonModule]]}),e})();class be{constructor(e){var t;this.rawFile=e;let n=(t=e)&&(t.nodeName||t.prop&&t.attr&&t.find)?e.value:e;this["_createFrom"+("string"==typeof n?"FakePath":"Object")](n)}_createFromFakePath(e){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}_createFromObject(e){this.size=e.size,this.type=e.type,this.name=e.name}}class xe{constructor(e,t,n){this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=e,this.some=t,this.options=n,this.file=new be(t),this._file=t,e.options&&(this.method=e.options.method||"POST",this.alias=e.options.itemAlias||"file"),this.url=e.options.url}upload(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}cancel(){this.uploader.cancelItem(this)}remove(){this.uploader.removeFromQueue(this)}onBeforeUpload(){}onBuildForm(e){return{form:e}}onProgress(e){return{progress:e}}onSuccess(e,t,n){return{response:e,status:t,headers:n}}onError(e,t,n){return{response:e,status:t,headers:n}}onCancel(e,t,n){return{response:e,status:t,headers:n}}onComplete(e,t,n){return{response:e,status:t,headers:n}}_onBeforeUpload(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}_onBuildForm(e){this.onBuildForm(e)}_onProgress(e){this.progress=e,this.onProgress(e)}_onSuccess(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(e,t,n)}_onError(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(e,t,n)}_onCancel(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(e,t,n)}_onComplete(e,t,n){this.onComplete(e,t,n),this.uploader.options.removeAfterUpload&&this.remove()}_prepareToUploading(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}let Se=(()=>{class e{static getMimeClass(e){let t="application";return-1!==this.mime_psd.indexOf(e.type)||e.type.match("image.*")?t="image":e.type.match("video.*")?t="video":e.type.match("audio.*")?t="audio":"application/pdf"===e.type?t="pdf":-1!==this.mime_compress.indexOf(e.type)?t="compress":-1!==this.mime_doc.indexOf(e.type)?t="doc":-1!==this.mime_xsl.indexOf(e.type)?t="xls":-1!==this.mime_ppt.indexOf(e.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(e.name)),t}static fileTypeDetection(e){let t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},n=e.split(".");if(n.length<2)return"application";let i=n[n.length-1].toLowerCase();return void 0===t[i]?"application":t[i]}}return e.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],e.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],e.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],e.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],e.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],e})();class ye{constructor(e){this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:e=>e._file,formatDataFunctionIsAsync:!1},this.setOptions(e),this.response=new c.EventEmitter}setOptions(e){this.options=Object.assign(this.options,e),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(let t=0;t<this.queue.length;t++)this.queue[t].url=this.options.url}addToQueue(e,t,n){let i=[];for(let a of e)i.push(a);let r=this._getFilters(n),s=this.queue.length,o=[];i.map(e=>{t||(t=this.options);let n=new be(e);if(this._isValidFile(n,r,t)){let n=new xe(this,e,t);o.push(n),this.queue.push(n),this._onAfterAddingFile(n)}else this._onWhenAddingFileFailed(n,r[this._failFilterIndex],t)}),this.queue.length!==s&&(this._onAfterAddingAll(o),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}removeFromQueue(e){let t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),this.progress=this._getTotalProgress()}clearQueue(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}uploadItem(e){let t=this.getIndexOfItem(e),n=this.queue[t],i=this.options.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[i](n))}cancelItem(e){let t=this.getIndexOfItem(e),n=this.queue[t];n&&n.isUploading&&(this.options.isHTML5?n._xhr:n._form).abort()}uploadAll(){let e=this.getNotUploadedItems().filter(e=>!e.isUploading);e.length&&(e.map(e=>e._prepareToUploading()),e[0].upload())}cancelAll(){this.getNotUploadedItems().map(e=>e.cancel())}isFile(e){return function(e){return File&&e instanceof File}(e)}isFileLikeObject(e){return e instanceof be}getIndexOfItem(e){return"number"==typeof e?e:this.queue.indexOf(e)}getNotUploadedItems(){return this.queue.filter(e=>!e.isUploaded)}getReadyItems(){return this.queue.filter(e=>e.isReady&&!e.isUploading).sort((e,t)=>e.index-t.index)}destroy(){}onAfterAddingAll(e){return{fileItems:e}}onBuildItemForm(e,t){return{fileItem:e,form:t}}onAfterAddingFile(e){return{fileItem:e}}onWhenAddingFileFailed(e,t,n){return{item:e,filter:t,options:n}}onBeforeUploadItem(e){return{fileItem:e}}onProgressItem(e,t){return{fileItem:e,progress:t}}onProgressAll(e){return{progress:e}}onSuccessItem(e,t,n,i){return{item:e,response:t,status:n,headers:i}}onErrorItem(e,t,n,i){return{item:e,response:t,status:n,headers:i}}onCancelItem(e,t,n,i){return{item:e,response:t,status:n,headers:i}}onCompleteItem(e,t,n,i){return{item:e,response:t,status:n,headers:i}}onCompleteAll(){}_mimeTypeFilter(e){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(e.type))}_fileSizeFilter(e){return!(this.options.maxFileSize&&e.size>this.options.maxFileSize)}_fileTypeFilter(e){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(Se.getMimeClass(e)))}_onErrorItem(e,t,n,i){e._onError(t,n,i),this.onErrorItem(e,t,n,i)}_onCompleteItem(e,t,n,i){e._onComplete(t,n,i),this.onCompleteItem(e,t,n,i);let r=this.getReadyItems()[0];this.isUploading=!1,r?r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}_headersGetter(e){return t=>t?e[t.toLowerCase()]||void 0:e}_xhrTransport(e){let t,n=this,i=e._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(e),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)t=this.options.formatDataFunction(e);else{t=new FormData,this._onBuildItemForm(e,t);const n=()=>t.append(e.alias,e._file,e.file.name);this.options.parametersBeforeFiles||n(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(n=>{let i=this.options.additionalParameter[n];"string"==typeof i&&i.indexOf("{{file_name}}")>=0&&(i=i.replace("{{file_name}}",e.file.name)),t.append(n,i)}),this.options.parametersBeforeFiles&&n()}if(i.upload.onprogress=t=>{let n=Math.round(t.lengthComputable?100*t.loaded/t.total:0);this._onProgressItem(e,n)},i.onload=()=>{let t=this._parseHeaders(i.getAllResponseHeaders()),n=this._transformResponse(i.response,t);this["_on"+(this._isSuccessCode(i.status)?"Success":"Error")+"Item"](e,n,i.status,t),this._onCompleteItem(e,n,i.status,t)},i.onerror=()=>{let t=this._parseHeaders(i.getAllResponseHeaders()),n=this._transformResponse(i.response,t);this._onErrorItem(e,n,i.status,t),this._onCompleteItem(e,n,i.status,t)},i.onabort=()=>{let t=this._parseHeaders(i.getAllResponseHeaders()),n=this._transformResponse(i.response,t);this._onCancelItem(e,n,i.status,t),this._onCompleteItem(e,n,i.status,t)},i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials,this.options.headers)for(let r of this.options.headers)i.setRequestHeader(r.name,r.value);if(e.headers.length)for(let r of e.headers)i.setRequestHeader(r.name,r.value);this.authToken&&i.setRequestHeader(this.authTokenHeader,this.authToken),i.onreadystatechange=function(){i.readyState==XMLHttpRequest.DONE&&n.response.emit(i.responseText)},this.options.formatDataFunctionIsAsync?t.then(e=>i.send(JSON.stringify(e))):i.send(t),this._render()}_getTotalProgress(e=0){if(this.options.removeAfterUpload)return e;let t=this.getNotUploadedItems().length,n=100/this.queue.length;return Math.round((t?this.queue.length-t:this.queue.length)*n+e*n/100)}_getFilters(e){if(!e)return this.options.filters;if(Array.isArray(e))return e;if("string"==typeof e){let t=e.match(/[^\s,]+/g);return this.options.filters.filter(e=>-1!==t.indexOf(e.name))}return this.options.filters}_render(){}_queueLimitFilter(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}_isValidFile(e,t,n){return this._failFilterIndex=-1,!t.length||t.every(t=>(this._failFilterIndex++,t.fn.call(this,e,n)))}_isSuccessCode(e){return e>=200&&e<300||304===e}_transformResponse(e,t){return e}_parseHeaders(e){let t,n,i,r={};return e?(e.split("\n").map(e=>{i=e.indexOf(":"),t=e.slice(0,i).trim().toLowerCase(),n=e.slice(i+1).trim(),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}_onWhenAddingFileFailed(e,t,n){this.onWhenAddingFileFailed(e,t,n)}_onAfterAddingFile(e){this.onAfterAddingFile(e)}_onAfterAddingAll(e){this.onAfterAddingAll(e)}_onBeforeUploadItem(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}_onBuildItemForm(e,t){e._onBuildForm(t),this.onBuildItemForm(e,t)}_onProgressItem(e,t){let n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}_onSuccessItem(e,t,n,i){e._onSuccess(t,n,i),this.onSuccessItem(e,t,n,i)}_onCancelItem(e,t,n,i){e._onCancel(t,n,i),this.onCancelItem(e,t,n,i)}}let Ie=(()=>{class e{constructor(e){this.onFileSelected=new c.EventEmitter,this.element=e}getOptions(){return this.uploader.options}getFilters(){return{}}isEmptyAfterSelection(){return!!this.element.nativeElement.attributes.multiple}onChange(){let e=this.element.nativeElement.files,t=this.getOptions(),n=this.getFilters();this.uploader.addToQueue(e,t,n),this.onFileSelected.emit(e),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ElementRef))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","ng2FileSelect",""]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("change",function(){return t.onChange()})},inputs:{uploader:"uploader"},outputs:{onFileSelected:"onFileSelected"}}),e})(),Ee=(()=>{class e{constructor(e){this.fileOver=new c.EventEmitter,this.onFileDrop=new c.EventEmitter,this.element=e}getOptions(){return this.uploader.options}getFilters(){return{}}onDrop(e){let t=this._getTransfer(e);if(!t)return;let n=this.getOptions(),i=this.getFilters();this._preventAndStop(e),this.uploader.addToQueue(t.files,n,i),this.fileOver.emit(!1),this.onFileDrop.emit(t.files)}onDragOver(e){let t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),this.fileOver.emit(!0))}onDragLeave(e){this.element&&e.currentTarget===this.element[0]||(this._preventAndStop(e),this.fileOver.emit(!1))}_getTransfer(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}_preventAndStop(e){e.preventDefault(),e.stopPropagation()}_haveFiles(e){return!!e&&(e.indexOf?-1!==e.indexOf("Files"):!!e.contains&&e.contains("Files"))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](c.ElementRef))},e.\u0275dir=c["\u0275\u0275defineDirective"]({type:e,selectors:[["","ng2FileDrop",""]],hostBindings:function(e,t){1&e&&c["\u0275\u0275listener"]("drop",function(e){return t.onDrop(e)})("dragover",function(e){return t.onDragOver(e)})("dragleave",function(e){return t.onDragLeave(e)})},inputs:{uploader:"uploader"},outputs:{fileOver:"fileOver",onFileDrop:"onFileDrop"}}),e})(),we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.CommonModule]]}),e})();function Ce(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1,"o arr\xe1strala aqu\xed"),c["\u0275\u0275elementEnd"]())}function _e(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",11),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("src",e.imagePreview,c["\u0275\u0275sanitizeUrl"])}}const ke=function(e){return{"nv-file-over":e}};let Oe=(()=>{class e{constructor(e){this._sanitizer=e,this.uploader=new ye({url:`${C.N.url}/post-image/upload`,allowedFileType:["image"]}),this.hasBaseDropZoneOver=!1}ngOnInit(){this.previousView()}previousView(){this.uploader.onAfterAddingFile=e=>{this.imagePreview=this._sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e._file))}}setImageLocalStorage(){this.uploader.onCompleteItem=e=>{let t=JSON.parse(e._xhr.response).image;localStorage.setItem("postImage",t)}}fileOverBase(e){this.hasBaseDropZoneOver=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](Q.H7))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["file-uploader-post"]],decls:15,vars:9,consts:[["for","image",1,"mt-3"],["type","file","id","image","ng2FileSelect","",1,"mb-3",3,"uploader","change"],["ng2FileDrop","",1,"well","my-drop-zone","d-flex","justify-content-center","align-items-center",3,"ngClass","uploader","fileOver"],[4,"ngIf"],["alt","Vista previa de la imagen","class","w-100 h-100",3,"src",4,"ngIf"],[1,"row","mt-2"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6"],["type","button",1,"btn","btn-info","btn-s",3,"disabled","click"],[1,"glyphicon","glyphicon-upload"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],[1,"glyphicon","glyphicon-trash"],["alt","Vista previa de la imagen",1,"w-100","h-100",3,"src"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",0),c["\u0275\u0275text"](1,"Seleccionar una imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](2,"input",1),c["\u0275\u0275listener"]("change",function(){return t.previousView()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275listener"]("fileOver",function(e){return t.fileOverBase(e)}),c["\u0275\u0275template"](4,Ce,2,0,"span",3),c["\u0275\u0275template"](5,_e,1,1,"img",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",5),c["\u0275\u0275elementStart"](7,"div",6),c["\u0275\u0275elementStart"](8,"button",7),c["\u0275\u0275listener"]("click",function(){return t.uploader.uploadAll(),t.setImageLocalStorage()}),c["\u0275\u0275elementStart"](9,"span",8),c["\u0275\u0275text"](10,"A\xf1adir imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",6),c["\u0275\u0275elementStart"](12,"button",9),c["\u0275\u0275listener"]("click",function(){return t.uploader.clearQueue(),t.imagePreview=null}),c["\u0275\u0275elementStart"](13,"span",10),c["\u0275\u0275text"](14,"Eliminar imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("uploader",t.uploader),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](7,ke,t.hasBaseDropZoneOver))("uploader",t.uploader),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.imagePreview),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.imagePreview),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("disabled",!t.uploader.getNotUploadedItems().length),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("disabled",!t.uploader.queue.length))},directives:[Ie,Ee,i.NgClass,i.NgIf],styles:[".my-drop-zone[_ngcontent-%COMP%]{border:3px dotted #d3d3d3;height:30vh}.nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}"]}),e})();const Fe=function(e){return["/posts",e]};function Le(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"h6",14),c["\u0275\u0275text"](1," Has modificado el post, puedes verlo "),c["\u0275\u0275elementStart"](2,"a",15),c["\u0275\u0275text"](3,"aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](1,Fe,e.post.title))}}function Te(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("title"),"t\xedtulo")," ")}}function Ae(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("content"),"contenido")," ")}}function qe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",17),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275property"]("value",e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function Ue(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("category"),"categor\xeda")," ")}}const Ne=function(){return{height:"300px",fontSize:"20px",color:"black"}};let Me=(()=>{class e{constructor(e,t,n,i,r,s){this._userService=e,this._postService=t,this._categoryService=n,this._route=i,this._router=r,this._flashMessagesService=s,this.pageTitle="Editar post",this.categories=[],this.form=new o.cw({title:new o.NI("",o.kI.required),content:new o.NI("",o.kI.required),category:new o.NI("")}),this.goodEdit=!1,this.postSubscription=new l.w,this.categoriesSubscription=new l.w,this.updateSubscription=new l.w}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.getCategories(),this.getRoutePost()}ngOnDestroy(){this.postSubscription.unsubscribe(),this.categoriesSubscription.unsubscribe(),this.updateSubscription.unsubscribe()}getRoutePost(){this._route.params.subscribe(e=>{e.title?this.getPost(e.title):this._router.navigate([""])})}getPost(e){this.postSubscription=this._postService.getPost(e).subscribe(e=>{if(e){let t=this._userService.getUserLoggedIn();e.user.id==t.id?(this.post=e,this.setFormValues()):this._router.navigate([""])}},e=>{this._router.navigate([""])})}setFormValues(){var e,t;null===(e=this.form.get("title"))||void 0===e||e.setValue(this.post.title),null===(t=this.form.get("content"))||void 0===t||t.setValue(this.post.content)}getCategories(){this.categoriesSubscription=this._categoryService.getCategories().subscribe(e=>{e&&(this.categories=e)},e=>{})}update(){this.setPostFormValues(),this.updateSubscription=this._postService.update(this.post).subscribe(e=>{e?(this.goodEdit=!0,this.post=e,window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50)):this.goodEdit=!1},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("No has editado el post","alert alert-danger col-md-5 mt-3 mx-auto",1500)})}setPostFormValues(){var e,t,n,i,r,s,o;(null===(e=this.form.get("title"))||void 0===e?void 0:e.value)&&(this.post.title=null===(t=this.form.get("title"))||void 0===t?void 0:t.value),(null===(n=this.form.get("content"))||void 0===n?void 0:n.value)&&(this.post.content=null===(i=this.form.get("content"))||void 0===i?void 0:i.value),(null===(r=this.form.get("category"))||void 0===r?void 0:r.value)&&(this.post.category=null===(s=this.form.get("category"))||void 0===s?void 0:s.value),localStorage.hasOwnProperty("postImage")&&(this.post.image=null!==(o=localStorage.getItem("postImage"))&&void 0!==o?o:"",localStorage.removeItem("postImage"))}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"]($.L),c["\u0275\u0275directiveInject"](y.H),c["\u0275\u0275directiveInject"](a.gz),c["\u0275\u0275directiveInject"](a.F0),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["edit-post"]],decls:29,vars:11,consts:[["id","edit",1,"row","text-center"],[1,"col-xs-9","col-sm-12","col-xl-12","col-md-12","col-lg-12","offset-md-2","offset-sm-2","offset-lg-2","col-12"],["class","alert alert-success col-md-5 mt-3 mx-auto",4,"ngIf"],[1,"col-md-5","ml-0","pl-0","mx-auto",3,"formGroup"],["for","title"],["type","text","name","title","id","title","formControlName","title",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["for","content"],["id","editor"],["formControlName","content","placeholder","Escribe",3,"styles","sanitize"],["formControlName","category","name","category","id","category",1,"form-control","w-100","mt-3"],["hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","button","value","Editar post",1,"btn","btn-success","mt-2",3,"disabled","click"],[1,"alert","alert-success","col-md-5","mt-3","mx-auto"],[3,"routerLink"],[1,"invalid-feedback","d-block"],[3,"value"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Editar post"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275template"](5,Le,4,3,"h6",2),c["\u0275\u0275element"](6,"flash-messages"),c["\u0275\u0275elementStart"](7,"form",3),c["\u0275\u0275elementStart"](8,"label",4),c["\u0275\u0275text"](9,"T\xedtulo:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"input",5),c["\u0275\u0275template"](11,Te,2,1,"span",6),c["\u0275\u0275elementStart"](12,"label",7),c["\u0275\u0275text"](13,"Contenido:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275element"](15,"quill-editor",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,Ae,2,1,"span",6),c["\u0275\u0275element"](17,"br"),c["\u0275\u0275elementStart"](18,"span"),c["\u0275\u0275text"](19,"Categor\xeda:"),c["\u0275\u0275element"](20,"br"),c["\u0275\u0275text"](21),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](22,"select",10),c["\u0275\u0275elementStart"](23,"option",11),c["\u0275\u0275text"](24,"Selecciona una categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](25,qe,2,2,"option",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](26,Ue,2,1,"span",6),c["\u0275\u0275element"](27,"file-uploader-post"),c["\u0275\u0275elementStart"](28,"input",13),c["\u0275\u0275listener"]("click",function(){return t.update()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.goodEdit),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("title"))),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("styles",c["\u0275\u0275pureFunction0"](10,Ne))("sanitize",!0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("content"))),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate"](null!=t.post&&t.post.category?t.post.category.name:"Categor\xeda borrada"),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",t.categories),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("category"))),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[i.NgIf,r.cS,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,fe,o.EJ,o.YN,o.Kr,i.NgForOf,Oe,a.yS],styles:["#edit[_ngcontent-%COMP%]{margin-top:-.5%!important}#editor[_ngcontent-%COMP%]{background-color:#fff}"]}),e})();function je(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"a",12),c["\u0275\u0275text"](1,"Mis posts"),c["\u0275\u0275elementEnd"]())}function Ve(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"a",13),c["\u0275\u0275text"](1,"Lista de categor\xedas"),c["\u0275\u0275elementEnd"]())}function Pe(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"a",14),c["\u0275\u0275text"](1,"Crear post"),c["\u0275\u0275elementEnd"]())}function Re(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"a",15),c["\u0275\u0275text"](1,"Crear categor\xeda"),c["\u0275\u0275elementEnd"]())}function De(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"a",16),c["\u0275\u0275text"](1,"Modificar rol de un/a usuario/a"),c["\u0275\u0275elementEnd"]())}function ze(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div"),c["\u0275\u0275elementStart"](1,"a",17),c["\u0275\u0275text"](2,"Posts inadecuados"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"a",18),c["\u0275\u0275text"](4,"Comentarios inadecuados"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"a",19),c["\u0275\u0275text"](6,"Usuarios para banear"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}let Be=(()=>{class e{constructor(e){this._userService=e,this.user=this._userService.getUserLoggedIn()}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["main"]],decls:18,vars:6,consts:[["id","panel",1,"row","mt-5"],[1,"col-sm-5","col-xl-3","col-md-4","col-12","pb-4"],["id","v-pills-tab","role","tablist","aria-orientation","vertical",1,"nav","flex-column","nav-pills"],["class","nav-link","routerLink","my-posts","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",4,"ngIf"],["class","nav-link","routerLink","category-list","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",4,"ngIf"],["routerLink","my-comments","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"],["class","nav-link","routerLink","create-post","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",4,"ngIf"],["class","nav-link","routerLink","create-category","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",4,"ngIf"],["class","nav-link","routerLink","update-role","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",4,"ngIf"],[4,"ngIf"],["routerLink","user-settings","routerLinkActive","active","id","v-pills-settings-tab","data-toggle","pill","role","tab","aria-controls","v-pills-settings","aria-selected","false",1,"nav-link"],[1,"container-fluid","col-lg-8","col-md-6","col-sm-4","offset-md-1","offset-sm-1","col-12","mt-1","mx-auto"],["routerLink","my-posts","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"],["routerLink","category-list","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"],["routerLink","create-post","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",1,"nav-link"],["routerLink","create-category","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",1,"nav-link"],["routerLink","update-role","routerLinkActive","active","id","v-pills-profile-tab","data-toggle","pill","role","tab","aria-controls","v-pills-profile","aria-selected","false",1,"nav-link"],["routerLink","inadequate/posts","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"],["routerLink","inadequate/comments","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"],["routerLink","users-to-ban","routerLinkActive","active","id","v-pills-home-tab","data-toggle","pill","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Panel del usuario/a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275elementStart"](5,"div",2),c["\u0275\u0275template"](6,je,2,0,"a",3),c["\u0275\u0275template"](7,Ve,2,0,"a",4),c["\u0275\u0275elementStart"](8,"a",5),c["\u0275\u0275text"](9,"Mis comentarios"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](10,Pe,2,0,"a",6),c["\u0275\u0275template"](11,Re,2,0,"a",7),c["\u0275\u0275template"](12,De,2,0,"a",8),c["\u0275\u0275template"](13,ze,7,0,"div",9),c["\u0275\u0275elementStart"](14,"a",10),c["\u0275\u0275text"](15,"Ajustes del usuario/a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"div",11),c["\u0275\u0275element"](17,"router-outlet"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf","ROLE_READER"!=t.user.roles[0]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==t.user.roles[0]),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==t.user.roles[0]||"ROLE_WRITER"==t.user.roles[0]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==t.user.roles[0]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==t.user.roles[0]),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","ROLE_ADMIN"==t.user.roles[0]))},directives:[i.NgIf,a.yS,a.Od,a.lC],styles:["#panel[_ngcontent-%COMP%]{margin-top:8%!important}"]}),e})();function He(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1,"o arr\xe1strala aqu\xed"),c["\u0275\u0275elementEnd"]())}function $e(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",11),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("src",e.imagePreview,c["\u0275\u0275sanitizeUrl"])}}const We=function(e){return{"nv-file-over":e}};let Qe=(()=>{class e{constructor(e,t){this._userService=e,this._sanitizer=t,this.user=this._userService.getUserLoggedIn(),this.uploader=new ye({url:`${C.N.url}/profile-image/upload`,allowedFileType:["image"]}),this.hasBaseDropZoneOver=!1}ngOnInit(){this.previousView(),this.setProfileImage()}previousView(){this.uploader.onAfterAddingFile=e=>{this.imagePreview=this._sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e._file))}}setProfileImage(){this.uploader.onCompleteItem=e=>{let t=JSON.parse(e._xhr.response).image;this.user.profileImage=t,localStorage.setItem("user",JSON.stringify(this.user)),this._userService.setUserLoggedIn$(this.user)}}fileOverBase(e){this.hasBaseDropZoneOver=e}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](Q.H7))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["file-uploader"]],decls:15,vars:9,consts:[["for","profileImage",1,"mt-3"],["type","file","id","profileImage","ng2FileSelect","",1,"mb-3",3,"uploader","change"],["ng2FileDrop","",1,"well","my-drop-zone","d-flex","justify-content-center","align-items-center",3,"ngClass","uploader","fileOver"],[4,"ngIf"],["alt","Vista previa de la imagen","class","w-100 h-100",3,"src",4,"ngIf"],[1,"row","mt-2"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6"],["type","button",1,"btn","btn-info","btn-s",3,"disabled","click"],[1,"glyphicon","glyphicon-upload"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],[1,"glyphicon","glyphicon-trash"],["alt","Vista previa de la imagen",1,"w-100","h-100",3,"src"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"label",0),c["\u0275\u0275text"](1,"Seleccionar una imagen de perfil"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](2,"input",1),c["\u0275\u0275listener"]("change",function(){return t.previousView()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"div",2),c["\u0275\u0275listener"]("fileOver",function(e){return t.fileOverBase(e)}),c["\u0275\u0275template"](4,He,2,0,"span",3),c["\u0275\u0275template"](5,$e,1,1,"img",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"div",5),c["\u0275\u0275elementStart"](7,"div",6),c["\u0275\u0275elementStart"](8,"button",7),c["\u0275\u0275listener"]("click",function(){return t.uploader.uploadAll()}),c["\u0275\u0275elementStart"](9,"span",8),c["\u0275\u0275text"](10,"A\xf1adir imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"div",6),c["\u0275\u0275elementStart"](12,"button",9),c["\u0275\u0275listener"]("click",function(){return t.uploader.clearQueue(),t.imagePreview=null}),c["\u0275\u0275elementStart"](13,"span",10),c["\u0275\u0275text"](14,"Eliminar imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("uploader",t.uploader),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngClass",c["\u0275\u0275pureFunction1"](7,We,t.hasBaseDropZoneOver))("uploader",t.uploader),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.imagePreview),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.imagePreview),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("disabled",!t.uploader.getNotUploadedItems().length),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("disabled",!t.uploader.queue.length))},directives:[Ie,Ee,i.NgClass,i.NgIf],styles:[".my-drop-zone[_ngcontent-%COMP%]{border:3px dotted #d3d3d3;height:30vh}.nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}"]}),e})();function Ge(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",9),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("nick"),"nombre de usuario/a")," ")}}function Je(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",9),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("email"),"email")," ")}}let Ke=(()=>{class e{constructor(e,t){this._userService=e,this._flashMessagesService=t,this.loadUser(),this.form=new o.cw({nick:new o.NI(this.user.nick,o.kI.required),email:new o.NI(this.user.email,o.kI.email)}),this.loadUserSubscription=new l.w,this.updateSubscription=new l.w}loadUser(){this.loadUserSubscription=this._userService.getUserLoggedIn$().subscribe(e=>{e&&(this.user=e)})}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550)}ngOnDestroy(){this.loadUserSubscription.unsubscribe(),this.updateSubscription.unsubscribe()}updateUser(){this.setUserFormValues(),this.updateSubscription=this._userService.update(this.user).subscribe(e=>{e&&(this.user=e,this.user.password=this._userService.getPasswordForRefreshToken(),this._userService.login(this.user.email,this.user.password).subscribe(e=>{e&&(this.user=e[0],localStorage.setItem("user",JSON.stringify(this.user)),this._userService.setUserLoggedIn$(this.user))}),window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("Has modificado tu perfil","alert alert-success col-md-4 mt-3 mx-auto",3e3))},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("No has modificado tu perfil","alert alert-danger col-md-5 mt-3 mx-auto",3e3)})}setUserFormValues(){var e,t,n,i;(null===(e=this.form.get("nick"))||void 0===e?void 0:e.value)&&(this.user.nick=null===(t=this.form.get("nick"))||void 0===t?void 0:t.value),(null===(n=this.form.get("email"))||void 0===n?void 0:n.value)&&(this.user.email=null===(i=this.form.get("email"))||void 0===i?void 0:i.value)}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.email)&&(i=`El campo ${t} es incorrecto`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["user-settings"]],decls:17,vars:4,consts:[[1,"row","text-center"],[1,"col-xs-9","col-sm-12","col-xl-12","col-md-12","col-lg-12","offset-md-2","offset-sm-2","offset-lg-2","col-12"],[1,"col-md-3","ml-0","pl-0","mx-auto",3,"formGroup"],["for","nick"],["type","text","name","nick","id","nick","formControlName","nick",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["for","email"],["type","email","name","email","id","email","formControlName","email","placeholder","ejemplo@ejemplo.ejemplo",1,"form-control","text-center"],["type","button","value","Modificar datos",1,"btn","btn-success","mt-1",3,"disabled","click"],[1,"invalid-feedback","d-block"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Ajustes del usuario/a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275element"](5,"flash-messages"),c["\u0275\u0275elementStart"](6,"form",2),c["\u0275\u0275elementStart"](7,"label",3),c["\u0275\u0275text"](8,"Nombre de usuario/a:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](9,"input",4),c["\u0275\u0275template"](10,Ge,2,1,"span",5),c["\u0275\u0275elementStart"](11,"label",6),c["\u0275\u0275text"](12,"Email:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](13,"input",7),c["\u0275\u0275template"](14,Je,2,1,"span",5),c["\u0275\u0275element"](15,"file-uploader"),c["\u0275\u0275elementStart"](16,"input",8),c["\u0275\u0275listener"]("click",function(){return t.updateUser()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("nick"))),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("email"))),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[r.cS,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,i.NgIf,Qe],styles:[""]}),e})();function Ye(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No tienes posts"),c["\u0275\u0275elementEnd"]())}function Ze(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function Xe(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,Ye,2,0,"h5",4),c["\u0275\u0275template"](2,Ze,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noPosts),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noPosts)}}function et(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",32),2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("src",t.imageUrl+e.image,c["\u0275\u0275sanitizeUrl"])}}function tt(e,t){1&e&&c["\u0275\u0275element"](0,"img",33)}const nt=function(e){return["/user-panel/edit-post",e]};function it(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",15),c["\u0275\u0275elementStart"](1,"a",34),c["\u0275\u0275element"](2,"img",35),c["\u0275\u0275text"](3," Editar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](1,nt,e.title))}}const rt=function(e){return["/posts",e]};function st(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275template"](7,et,1,1,"img",12),c["\u0275\u0275template"](8,tt,1,0,"img",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"amCalendar"),c["\u0275\u0275pipe"](12,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"amCalendar"),c["\u0275\u0275pipe"](16,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275elementStart"](18,"div",14),c["\u0275\u0275elementStart"](19,"div",15),c["\u0275\u0275elementStart"](20,"a",16),c["\u0275\u0275element"](21,"img",17),c["\u0275\u0275text"](22,"Ver "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](23,it,4,3,"div",18),c["\u0275\u0275elementStart"](24,"div",19),c["\u0275\u0275elementStart"](25,"button",20),c["\u0275\u0275element"](26,"img",21),c["\u0275\u0275text"](27," Borrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"div",22),c["\u0275\u0275elementStart"](29,"div",23),c["\u0275\u0275elementStart"](30,"div",24),c["\u0275\u0275elementStart"](31,"div",25),c["\u0275\u0275elementStart"](32,"h4",26),c["\u0275\u0275text"](33),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](34,"button",27),c["\u0275\u0275text"](35," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](36,"div",28),c["\u0275\u0275text"](37),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](38,"div",29),c["\u0275\u0275elementStart"](39,"button",30),c["\u0275\u0275listener"]("click",function(){const t=c["\u0275\u0275restoreView"](e).$implicit;return c["\u0275\u0275nextContext"](2).deletePost(t.id)}),c["\u0275\u0275text"](40," Borrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"button",31),c["\u0275\u0275text"](42," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](23,rt,e.title)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.title),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.category?e.category.name:"Categor\xeda borrada"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.image),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.image),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](11,13,c["\u0275\u0275pipeBind2"](12,15,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,18,c["\u0275\u0275pipeBind2"](16,20,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](25,rt,e.title)),c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",!e.inadequate),c["\u0275\u0275advance"](2),c["\u0275\u0275attribute"]("data-target","#delete"+e.id),c["\u0275\u0275advance"](3),c["\u0275\u0275propertyInterpolate"]("id","delete"+e.id),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" \xbfQuieres borrar el post ",e.title,"? "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" Vas a borrar definitivamente el post ",e.title," ")}}function ot(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"T\xedtulo"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Fecha de creaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Acciones"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"tbody"),c["\u0275\u0275template"](17,st,43,27,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](17),c["\u0275\u0275property"]("ngForOf",e.posts)}}let at=(()=>{class e{constructor(e,t,n){this._userService=e,this._postService=t,this._flashMessagesService=n,this.user=this._userService.getUserLoggedIn(),this.posts=[],this.userPostsSubscription=new l.w,this.deletePostSubscription=new l.w,this.loading=!0,this.imageUrl=`${C.N.url}/posts-images/`,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getUserPosts()}ngOnDestroy(){this.userPostsSubscription.unsubscribe(),this.deletePostSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getUserPosts(e=!1){this.userPostsSubscription=this._userService.getUserPosts(this.user.id).subscribe(t=>{t.length?(this.posts=t,this.loading=!1,this.noPosts=!1,e||this.dtTrigger.next()):(this.loading=!0,this.noPosts=!0)},e=>{})}deletePost(e){this.deletePostSubscription=this._postService.delete(e).subscribe(e=>{e&&(this.getUserPosts(!0),this.noPosts=!1,window.outerWidth<=parseInt("575")?window.scroll(0,600):window.scroll(0,50),this.showFlashMessage("Has borrado el post","alert alert-success col-md-5 mt-3 mx-auto text-center",3e3))},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,600):window.scroll(0,50),this.showFlashMessage("No has borrado el post","alert alert-danger col-md-5 mt-3 mx-auto text-center",3e3)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"]($.L),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["my-posts"]],decls:6,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["alt","Imagen del post","class","w-50",3,"src",4,"ngIf"],["src","assets/images/no-post-image.jpg","alt","Imagen del post","class","w-50",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6"],[1,"btn","btn-success","w-100","d-flex","align-items-center",3,"routerLink"],["src","assets/images/watch-icon.png","alt","Imagen de ver post",1,"w-50"],["class","col-xs-12 col-md-6 col-sm-8 col-lg-6",4,"ngIf"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","col-xl-12","mt-2"],["type","button","data-toggle","modal",1,"btn","btn-danger","w-75","d-flex","justify-content-center","mx-auto"],["src","assets/images/delete-icon.png","alt","Imagen de borrar post",1,"w-25"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],["alt","Imagen del post",1,"w-50",3,"src"],["src","assets/images/no-post-image.jpg","alt","Imagen del post",1,"w-50"],[1,"btn","btn-warning","w-100","d-flex","align-items-center",3,"routerLink"],["src","assets/images/edit-icon.png","alt","Imagen de editar post",1,"w-50"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Mis posts"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,Xe,3,2,"div",1),c["\u0275\u0275element"](4,"flash-messages"),c["\u0275\u0275template"](5,ot,18,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",!t.noPosts))},directives:[i.NgIf,r.cS,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:[""]}),e})();function lt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No hay posts inadecuados"),c["\u0275\u0275elementEnd"]())}function dt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function ct(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,lt,2,0,"h5",4),c["\u0275\u0275template"](2,dt,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noPosts),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noPosts)}}function mt(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",18),2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("src",t.imageUrl+e.image,c["\u0275\u0275sanitizeUrl"])}}function pt(e,t){1&e&&c["\u0275\u0275element"](0,"img",19)}const ut=function(e){return["/posts",e]};function ht(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275template"](7,mt,1,1,"img",12),c["\u0275\u0275template"](8,pt,1,0,"img",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"amCalendar"),c["\u0275\u0275pipe"](12,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"amCalendar"),c["\u0275\u0275pipe"](16,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275elementStart"](18,"div",14),c["\u0275\u0275elementStart"](19,"div",15),c["\u0275\u0275elementStart"](20,"a",16),c["\u0275\u0275element"](21,"img",17),c["\u0275\u0275text"](22,"Ver "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](18,ut,e.title)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.title),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.category?e.category.name:"Categor\xeda borrada"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.image),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.image),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](11,8,c["\u0275\u0275pipeBind2"](12,10,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,13,c["\u0275\u0275pipeBind2"](16,15,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](20,ut,e.title))}}function gt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"T\xedtulo"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Fecha de creaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Acci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"tbody"),c["\u0275\u0275template"](17,ht,23,22,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](17),c["\u0275\u0275property"]("ngForOf",e.posts)}}let ft=(()=>{class e{constructor(e){this._postService=e,this.posts=[],this.postsSubscription=new l.w,this.loading=!0,this.imageUrl=`${C.N.url}/posts-images/`,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getInadequates()}ngOnDestroy(){this.postsSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getInadequates(){this.postsSubscription=this._postService.getInadequates().subscribe(e=>{e.length?(this.posts=e,this.loading=!1,this.noPosts=!1,this.dtTrigger.next()):(this.loading=!0,this.noPosts=!0)},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"]($.L))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["inadequate-posts"]],decls:5,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["alt","Imagen del post","class","w-50",3,"src",4,"ngIf"],["src","../../../../../../../assets/images/no-post-image.jpg","alt","Imagen del post","class","w-50",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","mx-auto"],[1,"btn","btn-success","w-100","d-flex","align-items-center",3,"routerLink"],["src","assets/images/watch-icon.png","alt","Imagen de ver post",1,"w-50"],["alt","Imagen del post",1,"w-50",3,"src"],["src","../../../../../../../assets/images/no-post-image.jpg","alt","Imagen del post",1,"w-50"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Posts inadecuados"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,ct,3,2,"div",1),c["\u0275\u0275template"](4,gt,18,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.noPosts))},directives:[i.NgIf,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:[""]}),e})();var vt=n(9991);function bt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No hay comentarios inadecuados"),c["\u0275\u0275elementEnd"]())}function xt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function St(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,bt,2,0,"h5",4),c["\u0275\u0275template"](2,xt,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noComments),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noComments)}}const yt=function(e){return["/posts",e]};function It(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275pipe"](6,"amCalendar"),c["\u0275\u0275pipe"](7,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"td"),c["\u0275\u0275text"](9),c["\u0275\u0275pipe"](10,"amCalendar"),c["\u0275\u0275pipe"](11,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"td"),c["\u0275\u0275elementStart"](13,"div",12),c["\u0275\u0275elementStart"](14,"div",13),c["\u0275\u0275elementStart"](15,"a",14),c["\u0275\u0275element"](16,"img",15),c["\u0275\u0275text"](17,"Ver "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](15,yt,e.post.title)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.post.title),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](6,5,c["\u0275\u0275pipeBind2"](7,7,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](10,10,c["\u0275\u0275pipeBind2"](11,12,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](17,yt,e.post.title))}}function Et(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"Post en el que se public\xf3"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Fecha de creaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Acci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"tbody"),c["\u0275\u0275template"](13,It,18,19,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](13),c["\u0275\u0275property"]("ngForOf",e.comments)}}let wt=(()=>{class e{constructor(e){this._commentService=e,this.comments=[],this.loading=!0,this.commentsSubscription=new l.w,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getInadequates()}ngOnDestroy(){this.commentsSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getInadequates(){this.commentsSubscription=this._commentService.getInadequates().subscribe(e=>{e.length?(this.comments=e,this.loading=!1,this.noComments=!1,this.dtTrigger.next()):(this.loading=!0,this.noComments=!0)},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](vt.O))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["inadequate-comments"]],decls:5,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","mx-auto","text-center"],[1,"btn","btn-success","w-50","d-flex","align-items-center","mx-auto",3,"routerLink"],["src","assets/images/watch-icon.png","alt","Imagen de ver post",1,"w-50"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Comentarios inadecuados"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,St,3,2,"div",1),c["\u0275\u0275template"](4,Et,14,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.noComments))},directives:[i.NgIf,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:[""]}),e})();function Ct(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No hay usuarios"),c["\u0275\u0275elementEnd"]())}function _t(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function kt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,Ct,2,0,"h5",4),c["\u0275\u0275template"](2,_t,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noUsers),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noUsers)}}function Ot(e,t){if(1&e&&c["\u0275\u0275element"](0,"img",27),2&e){const e=c["\u0275\u0275nextContext"]().$implicit,t=c["\u0275\u0275nextContext"](2);c["\u0275\u0275property"]("src",t.profileImageUrl+e.profileImage,c["\u0275\u0275sanitizeUrl"])}}function Ft(e,t){1&e&&c["\u0275\u0275element"](0,"img",28)}function Lt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"span"),c["\u0275\u0275text"](1," No puedes banear a este usuario/a "),c["\u0275\u0275elementEnd"]())}function Tt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",29),c["\u0275\u0275element"](1,"img",30),c["\u0275\u0275text"](2," Banear "),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275attribute"]("data-target","#ban"+e.id)}}const At=function(e){return["/user-details",e]};function qt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275elementStart"](2,"a",11),c["\u0275\u0275text"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"td"),c["\u0275\u0275text"](5),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"td"),c["\u0275\u0275template"](7,Ot,1,1,"img",12),c["\u0275\u0275template"](8,Ft,1,0,"img",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"amCalendar"),c["\u0275\u0275pipe"](12,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275text"](14),c["\u0275\u0275pipe"](15,"amCalendar"),c["\u0275\u0275pipe"](16,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"td"),c["\u0275\u0275elementStart"](18,"div",14),c["\u0275\u0275elementStart"](19,"div",15),c["\u0275\u0275template"](20,Lt,2,0,"span",4),c["\u0275\u0275template"](21,Tt,3,1,"button",16),c["\u0275\u0275elementStart"](22,"div",17),c["\u0275\u0275elementStart"](23,"div",18),c["\u0275\u0275elementStart"](24,"div",19),c["\u0275\u0275elementStart"](25,"div",20),c["\u0275\u0275elementStart"](26,"h4",21),c["\u0275\u0275text"](27),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](28,"button",22),c["\u0275\u0275text"](29," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](30,"div",23),c["\u0275\u0275text"](31),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"div",24),c["\u0275\u0275elementStart"](33,"button",25),c["\u0275\u0275listener"]("click",function(){const t=c["\u0275\u0275restoreView"](e).$implicit;return c["\u0275\u0275nextContext"](2).ban(t.id)}),c["\u0275\u0275text"](34," Banear "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](35,"button",26),c["\u0275\u0275text"](36," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](22,At,e.id)),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate"](e.nick),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](1==e.banned?"Si":"No"),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",e.profileImage),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.profileImage),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](11,12,c["\u0275\u0275pipeBind2"](12,14,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](15,17,c["\u0275\u0275pipeBind2"](16,19,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf","admin"==e.nick||e.nick==n.userLoggedIn.nick||e.banned),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","admin"!=e.nick&&e.nick!=n.userLoggedIn.nick&&!e.banned),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate"]("id","ban"+e.id),c["\u0275\u0275advance"](5),c["\u0275\u0275textInterpolate1"](" \xbfQuieres banear a ",e.nick,"? "),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate1"](" Vas a banear definitivamente a ",e.nick," ")}}function Ut(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"Nick"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Baneado"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Imagen"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Fecha de registro"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"th"),c["\u0275\u0275text"](15,"Acci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"tbody"),c["\u0275\u0275template"](17,qt,37,24,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](17),c["\u0275\u0275property"]("ngForOf",e.users)}}let Nt=(()=>{class e{constructor(e,t){this._userService=e,this._flashMessagesService=t,this.users=[],this.profileImageUrl=`${C.N.url}/profile-images/`,this.userLoggedIn=this._userService.getUserLoggedIn(),this.usersSubscription=new l.w,this.banSubscription=new l.w,this.loading=!0,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getUsers()}ngOnDestroy(){this.usersSubscription.unsubscribe(),this.banSubscription.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getUsers(e=!1){this.usersSubscription=this._userService.getUsers().subscribe(t=>{t.length?(this.users=t,this.loading=!1,this.noUsers=!1,e||this.dtTrigger.next()):(this.loading=!0,this.noUsers=!0)},e=>{})}ban(e){this.banSubscription=this._userService.ban(e).subscribe(t=>{if(t){this.getUsers(!0),window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("Has baneado al usuario","alert alert-success col-md-5 mt-3 mx-auto text-center",3e3);let t=this._userService.getUserLoggedIn();t&&e==t.id&&(localStorage.clear(),this._userService.setUserLoggedIn$(null))}},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("No has baneado al usuario","alert alert-danger col-md-5 mt-3 mx-auto text-center",3e3)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["users-to-ban"]],decls:5,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["alt","Imagen del usuario","class","w-50",3,"src",4,"ngIf"],["src","assets/images/no-profile-image.png","alt","Imagen del usuario","class","w-50",4,"ngIf"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","col-xl-12","mt-2"],["type","button","class","btn btn-warning  d-flex justify-content-center mx-auto","data-toggle","modal",4,"ngIf"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-success",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],["alt","Imagen del usuario",1,"w-50",3,"src"],["src","assets/images/no-profile-image.png","alt","Imagen del usuario",1,"w-50"],["type","button","data-toggle","modal",1,"btn","btn-warning","d-flex","justify-content-center","mx-auto"],["src","assets/images/edit-icon.png","alt","Imagen de banear usuario",1,"w-25"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Usuarios para banear"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275template"](3,kt,3,2,"div",1),c["\u0275\u0275template"](4,Ut,18,3,"table",2)),2&e&&(c["\u0275\u0275advance"](3),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.noUsers))},directives:[i.NgIf,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:[""]}),e})();class Mt{constructor(e,t,n,i,r,s,o,a){this.id=e,this.categoryId=t,this.title=n,this.content=i,this.userId=r,this.image=s,this.comments=a,this.inadequate=o,this.createdAt=Date.now()}setCategoryId(e){this.categoryId=e}setTitle(e){this.title=e}setContent(e){this.content=e}setUserId(e){this.userId=e}setImage(e){this.image=e}setInadequate(e){this.inadequate=e}setComments(e){this.comments=e}setUpdatedAt(e){this.updatedAt=e}getId(){return this.id}getCategoryId(){return this.categoryId}getTitle(){return this.title}getContent(){return this.content}getUserId(){return this.userId}getImage(){return this.image}getInadequate(){return this.inadequate}getComments(){return this.comments}getCreatedAt(){return this.createdAt}getUpdatedAt(){return this.updatedAt}}const jt=function(e){return["/posts",e]};function Vt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"h6",14),c["\u0275\u0275text"](1," Has creado el post, puedes verlo "),c["\u0275\u0275elementStart"](2,"a",15),c["\u0275\u0275text"](3,"aqu\xed"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](1,jt,e.postTitleCreated))}}function Pt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("title"),"t\xedtulo")," ")}}function Rt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("content"),"contenido")," ")}}function Dt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"option",17),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;c["\u0275\u0275property"]("value",e.id),c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function zt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"span",16),c["\u0275\u0275text"](1),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275textInterpolate1"](" ",e.wrongValidationMessage(e.form.get("category"),"categor\xeda")," ")}}const Bt=function(){return{height:"300px",fontSize:"20px",color:"black"}};let Ht=(()=>{class e{constructor(e,t,n,i){this._userService=e,this._postService=t,this._categoryService=n,this._flashMessagesService=i,this.user=this._userService.getUserLoggedIn(),this.post=new Mt(null,0,"","",this.user.id,"",!1,null),this.goodCreate=!1,this.categories=[],this.form=new o.cw({title:new o.NI("",o.kI.required),content:new o.NI("",o.kI.required),category:new o.NI("",o.kI.required)}),this.postTitleCreated="",this.categoriesSubscription=new l.w,this.createSubscription=new l.w}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.getCategories()}ngOnDestroy(){this.categoriesSubscription.unsubscribe(),this.createSubscription.unsubscribe()}getCategories(){this.categoriesSubscription=this._categoryService.getCategories().subscribe(e=>{e&&(this.categories=e)},e=>{})}create(){this.setPostFormValues(),this.createSubscription=this._postService.create(this.post).subscribe(e=>{e?(this.goodCreate=!0,this._postService.setCreatedPost$(!0),this.postTitleCreated=this.post.getTitle(),window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50)):this.goodCreate=!1},e=>{this.goodCreate=!1,window.outerWidth<=parseInt("575")?window.scroll(0,550):window.scroll(0,50),this.showFlashMessage("No has creado el post","alert alert-danger col-md-5 mt-3 mx-auto",3e3)})}setPostFormValues(){var e,t,n,i;this.post.setTitle(null===(e=this.form.get("title"))||void 0===e?void 0:e.value),this.post.setContent(null===(t=this.form.get("content"))||void 0===t?void 0:t.value),this.post.setCategoryId(null===(n=this.form.get("category"))||void 0===n?void 0:n.value),localStorage.hasOwnProperty("postImage")&&(this.post.setImage(null!==(i=localStorage.getItem("postImage"))&&void 0!==i?i:""),localStorage.removeItem("postImage"))}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}checkTouched(e){return!!e.touched}wrongValidationMessage(e,t){var n;let i="";return(null===(n=e.errors)||void 0===n?void 0:n.required)&&(i=`El campo ${t} es obligatorio`),i}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"]($.L),c["\u0275\u0275directiveInject"](y.H),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["create-post"]],decls:24,vars:10,consts:[["id","create",1,"row","text-center"],[1,"col-xs-9","col-sm-12","col-xl-12","col-md-12","col-lg-12","offset-md-2","offset-sm-2","offset-lg-2","col-12"],["class","alert alert-success col-md-5 mt-3 mx-auto",4,"ngIf"],[1,"col-md-5","ml-0","pl-0","mx-auto",3,"formGroup"],["for","title"],["type","text","name","title","id","title","formControlName","title",1,"form-control","text-center"],["class","invalid-feedback d-block",4,"ngIf"],["for","content"],["id","editor"],["formControlName","content","placeholder","Escribe",3,"styles","sanitize"],["formControlName","category","name","category","id","category",1,"form-control","w-100","mt-3"],["hidden","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","button","value","Crear post",1,"btn","btn-success","mt-2",3,"disabled","click"],[1,"alert","alert-success","col-md-5","mt-3","mx-auto"],[3,"routerLink"],[1,"invalid-feedback","d-block"],[3,"value"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"div",0),c["\u0275\u0275elementStart"](1,"div",1),c["\u0275\u0275elementStart"](2,"h3"),c["\u0275\u0275text"](3,"Crear post"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"hr"),c["\u0275\u0275template"](5,Vt,4,3,"h6",2),c["\u0275\u0275element"](6,"flash-messages"),c["\u0275\u0275elementStart"](7,"form",3),c["\u0275\u0275elementStart"](8,"label",4),c["\u0275\u0275text"](9,"T\xedtulo:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"input",5),c["\u0275\u0275template"](11,Pt,2,1,"span",6),c["\u0275\u0275elementStart"](12,"label",7),c["\u0275\u0275text"](13,"Contenido:"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"div",8),c["\u0275\u0275element"](15,"quill-editor",9),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](16,Rt,2,1,"span",6),c["\u0275\u0275elementStart"](17,"select",10),c["\u0275\u0275elementStart"](18,"option",11),c["\u0275\u0275text"](19,"Selecciona una categor\xeda"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](20,Dt,2,2,"option",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](21,zt,2,1,"span",6),c["\u0275\u0275element"](22,"file-uploader-post"),c["\u0275\u0275elementStart"](23,"input",13),c["\u0275\u0275listener"]("click",function(){return t.create()}),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("ngIf",t.goodCreate),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("formGroup",t.form),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("title"))),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("styles",c["\u0275\u0275pureFunction0"](9,Bt))("sanitize",!0),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("content"))),c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngForOf",t.categories),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",t.checkTouched(t.form.get("category"))),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",!t.form.valid))},directives:[i.NgIf,r.cS,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,fe,o.EJ,o.YN,o.Kr,i.NgForOf,Oe,a.yS],styles:["#create[_ngcontent-%COMP%]{margin-top:-.5%!important}#editor[_ngcontent-%COMP%]{background-color:#fff}"]}),e})();function $t(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h5"),c["\u0275\u0275text"](1,"No hay categor\xedas"),c["\u0275\u0275elementEnd"]())}function Wt(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"button",6),c["\u0275\u0275element"](1,"span",7),c["\u0275\u0275text"](2," Cargando... "),c["\u0275\u0275elementEnd"]())}function Qt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",3),c["\u0275\u0275template"](1,$t,2,0,"h5",4),c["\u0275\u0275template"](2,Wt,3,0,"button",5),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",e.noCategories),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!e.noCategories)}}const Gt=function(e){return["/user-panel/edit-category",e]};function Jt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"a",25),c["\u0275\u0275element"](1,"img",26),c["\u0275\u0275text"](2," Editar "),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275property"]("routerLink",c["\u0275\u0275pureFunction1"](1,Gt,e.name))}}function Kt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"button",27),c["\u0275\u0275element"](1,"img",28),c["\u0275\u0275text"](2," Borrar "),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]().$implicit;c["\u0275\u0275attribute"]("data-target","#delete"+e.id)}}function Yt(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"tr"),c["\u0275\u0275elementStart"](1,"td"),c["\u0275\u0275text"](2),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"td"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"td"),c["\u0275\u0275text"](6),c["\u0275\u0275pipe"](7,"amCalendar"),c["\u0275\u0275pipe"](8,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"td"),c["\u0275\u0275text"](10),c["\u0275\u0275pipe"](11,"amCalendar"),c["\u0275\u0275pipe"](12,"amLocale"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](13,"td"),c["\u0275\u0275elementStart"](14,"div",11),c["\u0275\u0275elementStart"](15,"div",12),c["\u0275\u0275template"](16,Jt,3,3,"a",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](17,"div",12),c["\u0275\u0275template"](18,Kt,3,1,"button",14),c["\u0275\u0275elementStart"](19,"div",15),c["\u0275\u0275elementStart"](20,"div",16),c["\u0275\u0275elementStart"](21,"div",17),c["\u0275\u0275elementStart"](22,"div",18),c["\u0275\u0275elementStart"](23,"h4",19),c["\u0275\u0275text"](24,"\xbfQuieres borrar la categor\xeda?"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](25,"button",20),c["\u0275\u0275text"](26," \xd7 "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](27,"div",21),c["\u0275\u0275text"](28),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](29,"div",22),c["\u0275\u0275elementStart"](30,"button",23),c["\u0275\u0275listener"]("click",function(){const t=c["\u0275\u0275restoreView"](e).$implicit;return c["\u0275\u0275nextContext"](2).deleteCategory(t.id)}),c["\u0275\u0275text"](31," Borrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](32,"button",24),c["\u0275\u0275text"](33," Cerrar "),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](e.name),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](null==e.user?null:e.user.nick),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](7,8,c["\u0275\u0275pipeBind2"](8,10,e.createdAt,"es"))),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](11,13,c["\u0275\u0275pipeBind2"](12,15,e.updatedAt,"es"))),c["\u0275\u0275advance"](6),c["\u0275\u0275property"]("ngIf",(null==e.user?null:e.user.id)==(null==n.user?null:n.user.id)),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",(null==e.user?null:e.user.id)==(null==n.user?null:n.user.id)||"admin"==(null==n.user?null:n.user.nick)),c["\u0275\u0275advance"](1),c["\u0275\u0275propertyInterpolate"]("id","delete"+e.id),c["\u0275\u0275advance"](9),c["\u0275\u0275textInterpolate1"](" Vas a borrar definitivamente la categor\xeda: ",e.name," ")}}function Zt(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"table",8,9),c["\u0275\u0275elementStart"](2,"thead"),c["\u0275\u0275elementStart"](3,"tr"),c["\u0275\u0275elementStart"](4,"th"),c["\u0275\u0275text"](5,"Nombre"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"th"),c["\u0275\u0275text"](7,"Creador"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](8,"th"),c["\u0275\u0275text"](9,"Fecha de creaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](10,"th"),c["\u0275\u0275text"](11,"Fecha de modificaci\xf3n"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"th"),c["\u0275\u0275text"](13,"Acci\xf3n/es"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"tbody"),c["\u0275\u0275template"](15,Yt,34,18,"tr",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){const e=c["\u0275\u0275nextContext"]();c["\u0275\u0275property"]("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),c["\u0275\u0275advance"](15),c["\u0275\u0275property"]("ngForOf",e.categories)}}let Xt=(()=>{class e{constructor(e,t,n){this._categoryService=e,this._userService=t,this._flashMessagesService=n,this.categories=[],this.user=this._userService.getUserLoggedIn(),this.loading=!0,this.categoriesSubscription=new l.w,this.deleteSubscription=new l.w,this.dtOptions={},this.dtTrigger=new d.xQ}ngOnInit(){window.outerWidth<=parseInt("575")&&window.scroll(0,550),this.loadTableConfiguration(),this.getCategories()}ngOnDestroy(){this.categoriesSubscription.unsubscribe(),this.deleteSubscription.unsubscribe(),this.dtTrigger.unsubscribe()}loadTableConfiguration(){this.dtOptions={pagingType:"full_numbers",pageLength:5,language:{url:"https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"},order:[]}}getCategories(e=!1){this.categoriesSubscription=this._categoryService.getCategories().subscribe(t=>{t.length>0?(this.categories=t,this.noCategories=!1,this.loading=!1,e||this.dtTrigger.next()):(this.loading=!0,this.noCategories=!0)},e=>{})}deleteCategory(e){this.deleteSubscription=this._categoryService.delete(e).subscribe(e=>{e&&(this.getCategories(!0),this.noCategories=!0,this._categoryService.setUpdateNavbarCategoryList$(!0),window.outerWidth<=parseInt("575")?window.scroll(0,600):window.scroll(0,50),this.showFlashMessage("Has borrado la categor\xeda","alert alert-success col-md-5 mt-3 mx-auto text-center",3e3))},e=>{window.outerWidth<=parseInt("575")?window.scroll(0,600):window.scroll(0,50),this.showFlashMessage("No has borrado la categor\xeda","alert alert-danger col-md-5 mt-3 mx-auto text-center",3e3)})}showFlashMessage(e,t,n){this._flashMessagesService.show(e,{cssClass:t,timeout:n})}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](y.H),c["\u0275\u0275directiveInject"](m.K),c["\u0275\u0275directiveInject"](r.GQ))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["category-list"]],decls:6,vars:2,consts:[[1,"text-center"],["class","text-center mt-5",4,"ngIf"],["datatable","","class","table-responsive mt-5 table table-hover text-center bg-light",3,"dtOptions","dtTrigger",4,"ngIf"],[1,"text-center","mt-5"],[4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["datatable","",1,"table-responsive","mt-5","table","table-hover","text-center","bg-light",3,"dtOptions","dtTrigger"],["table",""],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-xs-12","col-md-6","col-sm-8","col-lg-6","col-xl-6"],["class","btn btn-warning w-50",3,"routerLink",4,"ngIf"],["type","button","class","btn btn-danger w-50","data-toggle","modal",4,"ngIf"],["role","dialog",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content","modal-dark-mode"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-body"],[1,"modal-footer"],["data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-info"],[1,"btn","btn-warning","w-50",3,"routerLink"],["src","assets/images/edit-icon.png","alt","Imagen de editar categor\xeda",1,"w-25"],["type","button","data-toggle","modal",1,"btn","btn-danger","w-50"],["src","assets/images/delete-icon.png","alt","Imagen de borrar categor\xeda",1,"w-25"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"h3",0),c["\u0275\u0275text"](1,"Lista de categor\xedas"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](2,"hr"),c["\u0275\u0275element"](3,"flash-messages"),c["\u0275\u0275template"](4,Qt,3,2,"div",1),c["\u0275\u0275template"](5,Zt,16,3,"table",2)),2&e&&(c["\u0275\u0275advance"](4),c["\u0275\u0275property"]("ngIf",t.loading),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf",!t.noCategories))},directives:[r.cS,i.NgIf,p.G,i.NgForOf,a.yS],pipes:[u.tp,u.Ue],styles:["#image[_ngcontent-%COMP%]{height:30px!important}"]}),e})(),en=(()=>{class e{constructor(e,t){this._userService=e,this._router=t,this.user=this._userService.getUserLoggedIn()}canActivate(){return"ROLE_ADMIN"==this.user.roles[0]||(this._router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](m.K),c["\u0275\u0275inject"](a.F0))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tn=(()=>{class e{constructor(e,t){this._userService=e,this._router=t,this.user=this._userService.getUserLoggedIn()}canActivate(){return"ROLE_READER"!=this.user.roles[0]||(this._router.navigate([""]),!1)}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275inject"](m.K),c["\u0275\u0275inject"](a.F0))},e.\u0275prov=c["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const nn=[{path:"",component:Be,children:[{path:"my-posts",component:at,canActivate:[tn]},{path:"my-comments",component:S},{path:"category-list",component:Xt,canActivate:[en]},{path:"create-post",component:Ht,canActivate:[tn]},{path:"create-category",component:H,canActivate:[en]},{path:"edit-post/:title",component:Me,canActivate:[tn]},{path:"edit-category/:name",component:w,canActivate:[en]},{path:"update-role",component:R,canActivate:[en]},{path:"inadequate/posts",component:ft,canActivate:[en]},{path:"inadequate/comments",component:wt,canActivate:[en]},{path:"users-to-ban",component:Nt,canActivate:[en]},{path:"user-settings",component:Ke},{path:"**",redirectTo:""}]}];let rn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[a.Bz.forChild(nn)],a.Bz]}),e})();const sn={modules:{syntax:!0,toolbar:[["bold","italic","underline","strike"],[{font:[]}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],["clean"]]}};let on=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({imports:[[i.CommonModule,o.UX,s.JF,r.qz.forRoot(),rn,we,p.T,u._G,ve.forRoot(sn)]]}),e})()}}]);